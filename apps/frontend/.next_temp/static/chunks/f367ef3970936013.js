(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,95153,e=>{"use strict";var t=e.i(43476),r=e.i(932),a=e.i(71645),n=e.i(83642),s=e.i(18566),l=e.i(54858),i=e.i(81949);async function o(e){let t=new(window.AudioContext||window.webkitAudioContext)({sampleRate:16e3}),r=await e.arrayBuffer();return new Blob([function(e,t){let r=new DataView(new ArrayBuffer(44+2*e.length)),a=(e,t,r)=>{for(let a=0;a<r.length;a++)e.setUint8(t+a,r.charCodeAt(a))};a(r,0,"RIFF"),r.setUint32(4,36+2*e.length,!0),a(r,8,"WAVE"),a(r,12,"fmt "),r.setUint32(16,16,!0),r.setUint16(20,1,!0),r.setUint16(22,1,!0),r.setUint32(24,16e3,!0),r.setUint32(28,32e3,!0),r.setUint16(32,2,!0),r.setUint16(34,16,!0),a(r,36,"data"),r.setUint32(40,2*e.length,!0);let n=44;for(let t=0;t<e.length;t++,n+=2){let a=Math.max(-1,Math.min(1,e[t]));r.setInt16(n,a<0?32768*a:32767*a,!0)}return r}((await t.decodeAudioData(r)).getChannelData(0),16e3)],{type:"audio/wav"})}let c=e=>{let a,n,s=(0,r.c)(5),{filled:l,className:i}=e,o=l?"currentColor":"none",c=l?"0":"2";return s[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,t.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"}),s[0]=a):a=s[0],s[1]!==i||s[2]!==o||s[3]!==c?(n=(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:o,stroke:"currentColor",strokeWidth:c,strokeLinecap:"round",strokeLinejoin:"round",className:i,width:"24",height:"24",children:a}),s[1]=i,s[2]=o,s[3]=c,s[4]=n):n=s[4],n},d=e=>{let a,n,s,l=(0,r.c)(4),{className:i}=e;return l[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,t.jsx)("polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"}),n=(0,t.jsx)("path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"}),l[0]=a,l[1]=n):(a=l[0],n=l[1]),l[2]!==i?(s=(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i,children:[a,n]}),l[2]=i,l[3]=s):s=l[3],s},u=e=>{let a,n,s,l,i,o=(0,r.c)(6),{className:c}=e;return o[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,t.jsx)("path",{d:"M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"}),n=(0,t.jsx)("path",{d:"M19 10v2a7 7 0 0 1-14 0v-2"}),s=(0,t.jsx)("line",{x1:"12",y1:"19",x2:"12",y2:"23"}),l=(0,t.jsx)("line",{x1:"8",y1:"23",x2:"16",y2:"23"}),o[0]=a,o[1]=n,o[2]=s,o[3]=l):(a=o[0],n=o[1],s=o[2],l=o[3]),o[4]!==c?(i=(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:c,children:[a,n,s,l]}),o[4]=c,o[5]=i):i=o[5],i};function x(e){let a,n,s,l,i,o,x,m,N,S,C,k,A,E,O,P,_,D,T,$,L=(0,r.c)(81),{vocabs:R,loading:z,page:M,totalPages:I,setPage:B,fetchVocabs:W,filters:F,handleFilterChange:U,handleSort:K,sortConfig:V,columnOrder:q,handleDragStart:G,handleDragOver:Q,handleDragEnd:X,draggedCol:H,handleRowClick:J,handleToggleStar:Z,handleSpeak:Y,handleOpenAssessment:ee,triggerInteraction:et}=e;L[0]!==W||L[1]!==F||L[2]!==B||L[3]!==V?(a=e=>{B(e),W(e,F,V)},L[0]=W,L[1]=F,L[2]=B,L[3]=V,L[4]=a):a=L[4];let er=a;L[5]!==V?(n=e=>V.key!==e?(0,t.jsx)("span",{className:"text-gray-300 ml-1 opacity-50",children:"â†•"}):"asc"===V.direction?(0,t.jsx)("span",{className:"ml-1 text-indigo-600",children:"â–²"}):(0,t.jsx)("span",{className:"ml-1 text-indigo-600",children:"â–¼"}),L[5]=V,L[6]=n):n=L[6];let ea=n;if(L[7]!==Z?(s=e=>(0,t.jsx)("button",{onClick:t=>Z(e.id,e.isStarred,t),className:"hover:bg-gray-100 rounded-full p-1",children:(0,t.jsx)(c,{filled:e.isStarred,className:e.isStarred?"text-yellow-400 w-5 h-5":"text-gray-300 w-5 h-5"})}),L[7]=Z,L[8]=s):s=L[8],L[9]!==q||L[10]!==H||L[11]!==F||L[12]!==ea||L[13]!==X||L[14]!==Q||L[15]!==G||L[16]!==U||L[17]!==ee||L[18]!==J||L[19]!==K||L[20]!==Y||L[21]!==z||L[22]!==s||L[23]!==et||L[24]!==R){let e,r,a,n,c;L[31]!==F||L[32]!==U?(e=()=>(0,t.jsx)("input",{className:"w-full border rounded px-2 py-1 text-xs outline-none focus:border-indigo-500",placeholder:"Filter...",value:F.topic,onChange:e=>U("topic",e.target.value)}),L[31]=F,L[32]=U,L[33]=e):e=L[33],L[34]!==ee||L[35]!==Y||L[36]!==et?(r=e=>(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2 font-bold text-indigo-700",children:[(0,t.jsx)("span",{children:e.word}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("button",{onClick:t=>{ee(e,t),et(e)},className:"text-gray-400 hover:text-green-600 p-1 rounded-full hover:bg-green-50",title:"Practice Pronunciation",children:(0,t.jsx)(u,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:t=>{Y(e.word,t),et(e)},className:"text-gray-400 hover:text-indigo-600 p-1 rounded-full hover:bg-indigo-50",children:(0,t.jsx)(d,{className:"w-4 h-4"})})]})]}),L[34]=ee,L[35]=Y,L[36]=et,L[37]=r):r=L[37],L[38]!==F||L[39]!==U?(a=()=>(0,t.jsx)("input",{className:"w-full border rounded px-2 py-1 text-xs outline-none focus:border-indigo-500",placeholder:"Filter...",value:F.word,onChange:e=>U("word",e.target.value)}),L[38]=F,L[39]=U,L[40]=a):a=L[40],L[41]!==F||L[42]!==U?(n=()=>(0,t.jsx)("input",{className:"w-full border rounded px-2 py-1 text-xs outline-none focus:border-indigo-500",placeholder:"Meaning...",value:F.meaning,onChange:e=>U("meaning",e.target.value)}),L[41]=F,L[42]=U,L[43]=n):n=L[43],L[44]!==J?(c=e=>(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),J(e)},className:"text-indigo-600 text-xs border border-indigo-200 px-2 py-1 rounded hover:bg-indigo-50",children:"Edit"}),L[44]=J,L[45]=c):c=L[45];let S={star:{label:"â˜…",width:"w-12",sortKey:"isStarred",renderCell:s},updatedAt:{label:"Last Active",width:"w-32",sortKey:"updatedAt",renderCell:v},topic:{label:"Topic",width:"w-32",sortKey:"topic",renderCell:j,renderFilter:e},word:{label:"Word",width:"w-48",sortKey:"word",renderCell:r,renderFilter:a},pronunciation:{label:"Pronun.",width:"w-32",renderCell:w},meaning:{label:"Meaning",width:"w-48",renderCell:y,renderFilter:n},example:{label:"Example",width:"w-64",renderCell:b},relatedWords:{label:"Related",width:"w-40",renderCell:f},occurrence:{label:"Count",width:"w-20",sortKey:"occurrence",renderCell:p},score:{label:"Score",width:"w-20",renderCell:g},actions:{label:"Action",width:"w-20",renderCell:c}};N="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden flex flex-col",m="overflow-x-auto pb-4",o="min-w-full divide-y divide-gray-200 table-fixed",x=(0,t.jsxs)("thead",{className:"bg-gray-50 select-none",children:[(0,t.jsx)("tr",{children:q.map(e=>{let r=S[e];if(!r)return null;let a=H===e;return(0,t.jsx)("th",{draggable:!0,onDragStart:t=>G(t,e),onDragOver:t=>Q(t,e),onDragEnd:X,onClick:()=>r.sortKey&&K(r.sortKey),className:`${r.width} px-4 py-3 text-left text-xs font-bold text-gray-500 uppercase border-r border-gray-200 cursor-move hover:bg-gray-100 transition-all duration-200 ${a?"opacity-50 bg-indigo-50 border-2 border-indigo-300 scale-95 shadow-inner":""} ${"actions"===e?"sticky right-0 bg-gray-50 shadow-l z-10":""}`,children:(0,t.jsxs)("div",{className:"flex items-center justify-between pointer-events-none",children:[(0,t.jsx)("span",{children:r.label}),r.sortKey&&ea(r.sortKey)]})},e)})}),(0,t.jsx)("tr",{className:"bg-white border-b border-gray-200",children:q.map(e=>{let r=S[e];return r?(0,t.jsx)("td",{className:`p-2 border-r border-gray-100 ${"actions"===e?"sticky right-0 bg-white z-10":""}`,children:r.renderFilter?r.renderFilter():null},e):null})})]}),l="bg-white divide-y divide-gray-200",i=z?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:q.length,className:"text-center py-10 text-gray-500",children:"Loading data..."})}):0===R.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:q.length,className:"text-center py-10 text-gray-500",children:"No vocabulary found."})}):R.map(e=>(0,t.jsx)("tr",{className:"hover:bg-indigo-50/50 group transition-colors cursor-pointer",onClick:()=>J(e),children:q.map(r=>{let a=S[r];return a?(0,t.jsx)("td",{className:`px-4 py-3 text-sm border-r border-gray-100 align-top whitespace-normal break-words ${"actions"===r?"sticky right-0 bg-white group-hover:bg-indigo-50/50 shadow-l z-10":""}`,onClick:"actions"===r||"star"===r?h:void 0,children:a.renderCell(e)},r):null})},e.id)),L[9]=q,L[10]=H,L[11]=F,L[12]=ea,L[13]=X,L[14]=Q,L[15]=G,L[16]=U,L[17]=ee,L[18]=J,L[19]=K,L[20]=Y,L[21]=z,L[22]=s,L[23]=et,L[24]=R,L[25]=l,L[26]=i,L[27]=o,L[28]=x,L[29]=m,L[30]=N}else l=L[25],i=L[26],o=L[27],x=L[28],m=L[29],N=L[30];L[46]!==l||L[47]!==i?(S=(0,t.jsx)("tbody",{className:l,children:i}),L[46]=l,L[47]=i,L[48]=S):S=L[48],L[49]!==S||L[50]!==o||L[51]!==x?(C=(0,t.jsxs)("table",{className:o,children:[x,S]}),L[49]=S,L[50]=o,L[51]=x,L[52]=C):C=L[52],L[53]!==C||L[54]!==m?(k=(0,t.jsx)("div",{className:m,children:C}),L[53]=C,L[54]=m,L[55]=k):k=L[55];let en=M<=1;L[56]!==er||L[57]!==M?(A=()=>er(M-1),L[56]=er,L[57]=M,L[58]=A):A=L[58],L[59]!==en||L[60]!==A?(E=(0,t.jsx)("button",{disabled:en,onClick:A,className:"px-4 py-2 bg-white border rounded shadow-sm hover:bg-gray-100 disabled:opacity-50 text-sm font-medium",children:"â† Previous"}),L[59]=en,L[60]=A,L[61]=E):E=L[61],L[62]!==M?(O=(0,t.jsx)("span",{className:"text-indigo-600 font-bold",children:M}),L[62]=M,L[63]=O):O=L[63],L[64]!==O||L[65]!==I?(P=(0,t.jsxs)("span",{className:"text-sm font-medium text-gray-600",children:["Page ",O," of"," ",I]}),L[64]=O,L[65]=I,L[66]=P):P=L[66];let es=M>=I;return L[67]!==er||L[68]!==M?(_=()=>er(M+1),L[67]=er,L[68]=M,L[69]=_):_=L[69],L[70]!==es||L[71]!==_?(D=(0,t.jsx)("button",{disabled:es,onClick:_,className:"px-4 py-2 bg-white border rounded shadow-sm hover:bg-gray-100 disabled:opacity-50 text-sm font-medium",children:"Next â†’"}),L[70]=es,L[71]=_,L[72]=D):D=L[72],L[73]!==E||L[74]!==P||L[75]!==D?(T=(0,t.jsxs)("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex justify-between items-center sticky bottom-0 z-20",children:[E,P,D]}),L[73]=E,L[74]=P,L[75]=D,L[76]=T):T=L[76],L[77]!==k||L[78]!==T||L[79]!==N?($=(0,t.jsxs)("div",{className:N,children:[k,T]}),L[77]=k,L[78]=T,L[79]=N,L[80]=$):$=L[80],$}function h(e){return e.stopPropagation()}function g(e){let r=e.pronunciationScores||[];if(0===r.length)return(0,t.jsx)("span",{className:"text-gray-300 text-xs",children:"-"});let a=r.slice(-3),n=Math.round(a.reduce(m,0)/a.length),s="bg-red-100 text-red-700";return n>=80?s="bg-green-100 text-green-700":n>=60&&(s="bg-yellow-100 text-yellow-700"),(0,t.jsx)("div",{className:"flex flex-col items-center",children:(0,t.jsx)("span",{className:`text-xs font-bold px-2 py-0.5 rounded ${s}`,children:n})})}function m(e,t){return e+t}function p(e){return(0,t.jsx)("div",{className:"text-center font-semibold text-gray-500",children:e.occurrence})}function f(e){return(0,t.jsx)("span",{className:"text-gray-500 text-xs",children:e.relatedWords})}function b(e){return(0,t.jsx)("span",{className:"italic text-gray-500 text-xs line-clamp-2",title:e.example||"",children:e.example})}function y(e){return(0,t.jsx)("span",{className:"text-gray-800 text-sm line-clamp-2",title:e.meaning||"",children:e.meaning})}function w(e){return(0,t.jsx)("span",{className:"font-mono text-gray-500 text-xs",children:e.pronunciation})}function j(e){return e.topic&&(0,t.jsx)("span",{className:"bg-gray-100 px-2 py-0.5 rounded text-xs",children:e.topic})}function v(e){return(0,t.jsxs)("div",{className:"font-mono text-xs text-gray-500",children:[new Date(e.updatedAt).toLocaleDateString()," ",(0,t.jsx)("br",{}),(0,t.jsx)("span",{className:"text-gray-400",children:new Date(e.updatedAt).toLocaleTimeString()})]})}function N(e){let a,n,s,l,i,o,c,x,h,g,m,p,f,b,y,w,j,v,N,C,k,A,E,O,P,_,D,T,$,L,R,z,M,I,B,W,F,U,K,V,q,G,Q,X,H,J,Z=(0,r.c)(119),{isOpen:Y,onClose:ee,initialData:et,setInitialData:er,isEditMode:ea,onSave:en,onDelete:es,isAutoFilling:el,fetchAutoFillData:ei,handleOpenAssessment:eo,handleSpeak:ec,selectedVocab:ed}=e;if(!Y)return null;Z[0]!==ei||Z[1]!==et||Z[2]!==ea||Z[3]!==er?(a=async()=>{if(!ea){let e=await ei(et.word);e&&er({...et,...e})}},Z[0]=ei,Z[1]=et,Z[2]=ea,Z[3]=er,Z[4]=a):a=Z[4];let eu=a,ex=ea?"Editing Vocabulary":"Create New Vocabulary";Z[5]!==ex?(n=(0,t.jsx)("div",{className:"text-xs uppercase tracking-wider opacity-80 mb-2",children:ex}),Z[5]=ex,Z[6]=n):n=Z[6];let eh=et.word||"";Z[7]!==et||Z[8]!==er?(s=e=>er({...et,word:e.target.value}),Z[7]=et,Z[8]=er,Z[9]=s):s=Z[9];let eg=!ea;Z[10]!==eu||Z[11]!==eh||Z[12]!==s||Z[13]!==eg?(l=(0,t.jsx)("input",{value:eh,onChange:s,onBlur:eu,className:"bg-transparent text-4xl font-bold text-white placeholder-white/50 outline-none w-full border-b border-white/20 pb-1 focus:border-white transition-colors",placeholder:"Word...",autoFocus:eg}),Z[10]=eu,Z[11]=eh,Z[12]=s,Z[13]=eg,Z[14]=l):l=Z[14],Z[15]!==el?(i=el&&(0,t.jsx)("div",{className:"text-xs text-indigo-200 animate-pulse ml-2 whitespace-nowrap",children:"âœ¨ Auto-filling..."}),Z[15]=el,Z[16]=i):i=Z[16],Z[17]!==et||Z[18]!==eo||Z[19]!==ec?(o=et.word&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:e=>eo(et,e),className:"p-2 bg-white/20 rounded-full hover:bg-green-500 text-white transition-colors",children:(0,t.jsx)(u,{className:"w-6 h-6"})}),(0,t.jsx)("button",{onClick:e=>ec(et.word,e),className:"p-2 bg-white/20 rounded-full hover:bg-white/30 text-white",children:(0,t.jsx)(d,{className:"w-6 h-6"})})]}),Z[17]=et,Z[18]=eo,Z[19]=ec,Z[20]=o):o=Z[20],Z[21]!==l||Z[22]!==i||Z[23]!==o?(c=(0,t.jsxs)("div",{className:"flex items-center gap-3 w-full",children:[l,i,o]}),Z[21]=l,Z[22]=i,Z[23]=o,Z[24]=c):c=Z[24],Z[25]!==c||Z[26]!==n?(x=(0,t.jsxs)("div",{className:"w-full",children:[n,c]}),Z[25]=c,Z[26]=n,Z[27]=x):x=Z[27],Z[28]!==ee?(h=(0,t.jsx)("button",{onClick:ee,className:"text-white/70 hover:text-white text-2xl font-bold ml-4",children:"âœ•"}),Z[28]=ee,Z[29]=h):h=Z[29],Z[30]!==x||Z[31]!==h?(g=(0,t.jsxs)("div",{className:"bg-indigo-600 p-6 text-white flex justify-between items-start shrink-0",children:[x,h]}),Z[30]=x,Z[31]=h,Z[32]=g):g=Z[32],Z[33]!==el?(m=el&&(0,t.jsx)("div",{className:"absolute inset-0 bg-white/50 z-10 flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}),Z[33]=el,Z[34]=m):m=Z[34],Z[35]===Symbol.for("react.memo_cache_sentinel")?(p=(0,t.jsx)("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-1",children:"Pronunciation"}),Z[35]=p):p=Z[35];let em=et.pronunciation||"";Z[36]!==et||Z[37]!==er?(f=e=>er({...et,pronunciation:e.target.value}),Z[36]=et,Z[37]=er,Z[38]=f):f=Z[38],Z[39]!==em||Z[40]!==f?(b=(0,t.jsxs)("div",{children:[p,(0,t.jsx)("input",{value:em,onChange:f,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none font-mono text-sm",placeholder:"/.../"})]}),Z[39]=em,Z[40]=f,Z[41]=b):b=Z[41],Z[42]===Symbol.for("react.memo_cache_sentinel")?(y=(0,t.jsx)("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-1",children:"Part Of Speech"}),Z[42]=y):y=Z[42];let ep=et.partOfSpeech||"";Z[43]!==et||Z[44]!==er?(w=e=>er({...et,partOfSpeech:e.target.value}),Z[43]=et,Z[44]=er,Z[45]=w):w=Z[45],Z[46]===Symbol.for("react.memo_cache_sentinel")?(j=(0,t.jsx)("option",{value:"",children:"-- Select --"}),v=(0,t.jsx)("option",{value:"noun",children:"Noun"}),N=(0,t.jsx)("option",{value:"verb",children:"Verb"}),C=(0,t.jsx)("option",{value:"adjective",children:"Adjective"}),k=(0,t.jsx)("option",{value:"adverb",children:"Adverb"}),A=(0,t.jsx)("option",{value:"phrase",children:"Phrase"}),Z[46]=j,Z[47]=v,Z[48]=N,Z[49]=C,Z[50]=k,Z[51]=A):(j=Z[46],v=Z[47],N=Z[48],C=Z[49],k=Z[50],A=Z[51]),Z[52]!==ep||Z[53]!==w?(E=(0,t.jsxs)("div",{children:[y,(0,t.jsxs)("select",{value:ep,onChange:w,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none bg-white",children:[j,v,N,C,k,A]})]}),Z[52]=ep,Z[53]=w,Z[54]=E):E=Z[54],Z[55]!==b||Z[56]!==E?(O=(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[b,E]}),Z[55]=b,Z[56]=E,Z[57]=O):O=Z[57],Z[58]===Symbol.for("react.memo_cache_sentinel")?(P=(0,t.jsx)("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-1",children:"Meaning"}),Z[58]=P):P=Z[58];let ef=et.meaning||"";Z[59]!==et||Z[60]!==er?(_=e=>er({...et,meaning:e.target.value}),Z[59]=et,Z[60]=er,Z[61]=_):_=Z[61],Z[62]!==ef||Z[63]!==_?(D=(0,t.jsxs)("div",{children:[P,(0,t.jsx)("textarea",{value:ef,onChange:_,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none min-h-[80px] text-lg font-medium text-gray-800",placeholder:"NghÄ©a cá»§a tá»«..."})]}),Z[62]=ef,Z[63]=_,Z[64]=D):D=Z[64],Z[65]===Symbol.for("react.memo_cache_sentinel")?(T=(0,t.jsx)("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-1",children:"Example"}),Z[65]=T):T=Z[65];let eb=et.example||"";Z[66]!==et||Z[67]!==er?($=e=>er({...et,example:e.target.value}),Z[66]=et,Z[67]=er,Z[68]=$):$=Z[68],Z[69]!==eb||Z[70]!==$?(L=(0,t.jsxs)("div",{children:[T,(0,t.jsx)("textarea",{value:eb,onChange:$,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none bg-gray-50 italic text-gray-600",placeholder:"VÃ­ dá»¥..."})]}),Z[69]=eb,Z[70]=$,Z[71]=L):L=Z[71],Z[72]===Symbol.for("react.memo_cache_sentinel")?(R=(0,t.jsx)("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-1",children:"Topic"}),Z[72]=R):R=Z[72];let ey=et.topic||"";Z[73]!==et||Z[74]!==er?(z=e=>er({...et,topic:e.target.value}),Z[73]=et,Z[74]=er,Z[75]=z):z=Z[75],Z[76]!==ey||Z[77]!==z?(M=(0,t.jsxs)("div",{children:[R,(0,t.jsx)("input",{value:ey,onChange:z,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none",placeholder:"IT, Travel..."})]}),Z[76]=ey,Z[77]=z,Z[78]=M):M=Z[78],Z[79]===Symbol.for("react.memo_cache_sentinel")?(I=(0,t.jsx)("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-1",children:"Related Words"}),Z[79]=I):I=Z[79];let ew=et.relatedWords||"";Z[80]!==et||Z[81]!==er?(B=e=>er({...et,relatedWords:e.target.value}),Z[80]=et,Z[81]=er,Z[82]=B):B=Z[82],Z[83]!==ew||Z[84]!==B?(W=(0,t.jsxs)("div",{children:[I,(0,t.jsx)("input",{value:ew,onChange:B,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none",placeholder:"Synonyms..."})]}),Z[83]=ew,Z[84]=B,Z[85]=W):W=Z[85],Z[86]!==M||Z[87]!==W?(F=(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[M,W]}),Z[86]=M,Z[87]=W,Z[88]=F):F=Z[88],Z[89]!==m||Z[90]!==O||Z[91]!==D||Z[92]!==L||Z[93]!==F?(U=(0,t.jsxs)("div",{className:"p-6 space-y-5 overflow-y-auto relative",children:[m,O,D,L,F]}),Z[89]=m,Z[90]=O,Z[91]=D,Z[92]=L,Z[93]=F,Z[94]=U):U=Z[94],Z[95]!==ed?(K=ed?(0,t.jsxs)("div",{className:"text-xs text-gray-400",children:["Updated: ",new Date(ed.updatedAt).toLocaleString()]}):(0,t.jsx)("div",{}),Z[95]=ed,Z[96]=K):K=Z[96],Z[97]!==ea||Z[98]!==es?(V=ea&&es&&(0,t.jsx)("button",{onClick:es,className:"text-red-600 hover:bg-red-50 px-4 py-2 rounded-lg text-sm font-medium transition-colors border border-transparent hover:border-red-200",children:"Delete"}),Z[97]=ea,Z[98]=es,Z[99]=V):V=Z[99],Z[100]!==ee?(q=(0,t.jsx)("button",{onClick:ee,className:"text-gray-600 hover:bg-gray-200 px-5 py-2 rounded-lg text-sm font-medium transition-colors",children:"Cancel"}),Z[100]=ee,Z[101]=q):q=Z[101];let ej=ea?"Save Changes":"Create Word";return Z[102]!==en||Z[103]!==ej?(G=(0,t.jsx)("button",{onClick:en,className:"bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-2 rounded-lg text-sm font-bold shadow-md transform active:scale-95 transition-all",children:ej}),Z[102]=en,Z[103]=ej,Z[104]=G):G=Z[104],Z[105]!==V||Z[106]!==q||Z[107]!==G?(Q=(0,t.jsxs)("div",{className:"flex gap-3",children:[V,q,G]}),Z[105]=V,Z[106]=q,Z[107]=G,Z[108]=Q):Q=Z[108],Z[109]!==K||Z[110]!==Q?(X=(0,t.jsxs)("div",{className:"bg-gray-50 p-4 border-t border-gray-200 flex justify-between items-center shrink-0",children:[K,Q]}),Z[109]=K,Z[110]=Q,Z[111]=X):X=Z[111],Z[112]!==g||Z[113]!==U||Z[114]!==X?(H=(0,t.jsxs)("div",{className:"bg-white w-full max-w-2xl rounded-xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",onClick:S,children:[g,U,X]}),Z[112]=g,Z[113]=U,Z[114]=X,Z[115]=H):H=Z[115],Z[116]!==ee||Z[117]!==H?(J=(0,t.jsx)("div",{className:"fixed inset-0 bg-black/60 z-[150] flex items-center justify-center p-4 backdrop-blur-sm",onClick:ee,children:H}),Z[116]=ee,Z[117]=H,Z[118]=J):J=Z[118],J}function S(e){return e.stopPropagation()}function C(e){let a,n,s,l,i,o,c,x,h,g,m,p,f,b,y,w,j,v,N,S,C=(0,r.c)(54),{isOpen:A,onClose:O,vocabItem:P,isRecording:_,assessmentResult:D,assessmentError:T,isProcessingAudio:$,userAudioUrl:L,startRecording:R,stopRecording:z,handleSpeak:M}=e;if(!A||!P)return null;C[0]!==O?(a=(0,t.jsx)("button",{onClick:O,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:"âœ•"}),C[0]=O,C[1]=a):a=C[1],C[2]!==P.word?(n=(0,t.jsx)("h3",{className:"text-3xl font-bold text-gray-800 mb-1",children:P.word}),C[2]=P.word,C[3]=n):n=C[3],C[4]!==P.pronunciation?(s=P.pronunciation&&(0,t.jsxs)("span",{className:"font-mono text-gray-500 text-lg",children:["/",P.pronunciation,"/"]}),C[4]=P.pronunciation,C[5]=s):s=C[5],C[6]!==P.meaning?(l=P.meaning&&(0,t.jsx)("span",{className:"text-gray-600 text-center font-medium px-4 line-clamp-2",children:P.meaning}),C[6]=P.meaning,C[7]=l):l=C[7],C[8]!==s||C[9]!==l?(i=(0,t.jsxs)("div",{className:"flex flex-col items-center gap-1 mb-6",children:[s,l]}),C[8]=s,C[9]=l,C[10]=i):i=C[10],C[11]!==D?(o=D?(0,t.jsx)("div",{className:"relative w-32 h-32 mb-6 flex items-center justify-center rounded-full border-8 transition-all duration-500 ease-out",style:{borderColor:D.AccuracyScore>=80?"#4caf50":D.AccuracyScore>=60?"#ffeb3b":"#ff5252"},children:(0,t.jsx)("span",{className:"text-4xl font-bold",style:{color:D.AccuracyScore>=80?"#4caf50":D.AccuracyScore>=60?"#fbc02d":"#ff5252"},children:Math.round(D.AccuracyScore)})}):(0,t.jsx)("div",{className:"w-32 h-32 mb-6 rounded-full border-4 border-gray-100 flex items-center justify-center bg-gray-50",children:(0,t.jsx)("span",{className:"text-4xl text-gray-300",children:"?"})}),C[11]=D,C[12]=o):o=C[12],C[13]!==M||C[14]!==P.word?(c=e=>M(P.word,e),C[13]=M,C[14]=P.word,C[15]=c):c=C[15],C[16]===Symbol.for("react.memo_cache_sentinel")?(x=(0,t.jsx)(d,{className:"w-6 h-6"}),C[16]=x):x=C[16],C[17]!==c?(h=(0,t.jsx)("button",{onClick:c,className:"w-12 h-12 rounded-full bg-gray-100 hover:bg-gray-200 text-indigo-600 flex items-center justify-center transition-transform hover:scale-105 shadow-sm",title:"Nghe giá»ng chuáº©n",children:x}),C[17]=c,C[18]=h):h=C[18];let I=_?z:R,B=`w-16 h-16 rounded-full flex items-center justify-center shadow-lg transition-all transform hover:scale-105 ${_?"bg-red-500 animate-pulse ring-4 ring-red-200":"bg-indigo-600 hover:bg-indigo-700 ring-4 ring-indigo-100"}`;C[19]!==_?(g=_?(0,t.jsx)("div",{className:"w-6 h-6 bg-white rounded-sm"}):(0,t.jsx)(u,{className:"w-8 h-8 text-white"}),C[19]=_,C[20]=g):g=C[20],C[21]!==I||C[22]!==B||C[23]!==g?(m=(0,t.jsx)("button",{onClick:I,className:B,children:g}),C[21]=I,C[22]=B,C[23]=g,C[24]=m):m=C[24];let W=!L;C[25]!==L?(p=()=>{new Audio(L).play()},C[25]=L,C[26]=p):p=C[26];let F=`w-12 h-12 rounded-full flex items-center justify-center transition-transform hover:scale-105 shadow-sm ${L?"bg-green-100 hover:bg-green-200 text-green-700 cursor-pointer":"bg-gray-100 text-gray-300 cursor-not-allowed"}`;return C[27]===Symbol.for("react.memo_cache_sentinel")?(f=(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),C[27]=f):f=C[27],C[28]!==W||C[29]!==p||C[30]!==F?(b=(0,t.jsx)("button",{disabled:W,onClick:p,className:F,title:"Nghe láº¡i giá»ng báº¡n",children:f}),C[28]=W,C[29]=p,C[30]=F,C[31]=b):b=C[31],C[32]!==m||C[33]!==b||C[34]!==h?(y=(0,t.jsxs)("div",{className:"mb-6 flex gap-6 items-center",children:[h,m,b]}),C[32]=m,C[33]=b,C[34]=h,C[35]=y):y=C[35],C[36]!==$?(w=$&&(0,t.jsx)("p",{className:"text-indigo-500 font-medium animate-pulse",children:"Analyzing..."}),C[36]=$,C[37]=w):w=C[37],C[38]!==T?(j=T&&(0,t.jsx)("p",{className:"text-red-500 text-sm text-center bg-red-50 p-2 rounded",children:T}),C[38]=T,C[39]=j):j=C[39],C[40]!==D?(v=D&&(0,t.jsx)("div",{className:"w-full bg-gray-50 rounded-xl p-4 mt-2 border border-gray-100",children:(0,t.jsx)("div",{className:"flex flex-wrap justify-center gap-x-4 gap-y-2",children:D.Words.map(k)})}),C[40]=D,C[41]=v):v=C[41],C[42]!==a||C[43]!==y||C[44]!==n||C[45]!==w||C[46]!==j||C[47]!==v||C[48]!==i||C[49]!==o?(N=(0,t.jsxs)("div",{className:"bg-white w-full max-w-md rounded-2xl shadow-2xl overflow-hidden flex flex-col items-center p-8 relative animate-in fade-in zoom-in duration-200",onClick:E,children:[a,n,i,o,y,w,j,v]}),C[42]=a,C[43]=y,C[44]=n,C[45]=w,C[46]=j,C[47]=v,C[48]=i,C[49]=o,C[50]=N):N=C[50],C[51]!==O||C[52]!==N?(S=(0,t.jsx)("div",{className:"fixed inset-0 bg-black/80 z-[2147483649] flex items-center justify-center p-4 backdrop-blur-sm",onClick:O,children:N}),C[51]=O,C[52]=N,C[53]=S):S=C[53],S}function k(e,r){return(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("span",{className:`text-lg font-bold ${e.AccuracyScore>=80?"text-green-700":e.AccuracyScore>=60?"text-yellow-600":"text-red-600"}`,children:e.Word}),(0,t.jsx)("div",{className:"flex gap-0.5 mt-1",children:e.Phonemes?.map(A)})]},r)}function A(e,r){return(0,t.jsx)("span",{className:`text-xs px-1 rounded min-w-[20px] text-center ${e.AccuracyScore>=80?"bg-green-100 text-green-800":e.AccuracyScore>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,title:`/${e.Phoneme}/: ${e.AccuracyScore}`,children:e.Phoneme},r)}function E(e){return e.stopPropagation()}function O({isOpen:e,onClose:r,searchText:n,onSearchChange:s,results:l,isSearching:o,onSelect:c,onCreate:d,hasExactMatch:u,searchInputRef:x,handleSpeak:h,handleOpenAssessment:g,triggerInteraction:m}){let[p,f]=(0,a.useState)(""),[b,y]=(0,a.useState)(""),[w,j]=(0,a.useState)(""),[v,N]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{e&&x.current&&setTimeout(()=>x.current?.focus(),100)},[e,x]),(0,a.useEffect)(()=>{let e=async()=>{if(!n||u){f(""),y(""),j("");return}N(!0);try{let e=i.default.get(`https://api.dictionaryapi.dev/api/v2/entries/en/${n}`).catch(()=>null),t=i.default.get(`https://translate.googleapis.com/translate_a/single?client=gtx&sl=en&tl=vi&dt=t&q=${encodeURIComponent(n)}`).catch(()=>null),[r,a]=await Promise.all([e,t]);if(r&&r.data&&r.data[0]){let e=r.data[0];if(e.phonetic)y(e.phonetic);else if(e.phonetics&&e.phonetics.length>0){let t=e.phonetics.find(e=>e.text&&e.audio);y(t?t.text:e.phonetics[0].text||"")}e.meanings&&e.meanings.length>0&&j(e.meanings[0].partOfSpeech||"")}if(a&&a.data&&a.data[0]){let e=a.data[0].map(e=>e[0]).join("");f(e)}}catch(e){console.error("Translation error:",e),f(""),y(""),j("")}finally{N(!1)}},t=setTimeout(()=>{e()},500);return()=>clearTimeout(t)},[n,u]),e)?(0,t.jsx)("div",{className:"fixed inset-0 z-[100] flex items-start justify-center pt-20",onClick:r,style:{backgroundColor:"transparent"},children:(0,t.jsxs)("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-2xl overflow-hidden flex flex-col mx-4 border border-gray-100",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"p-4 border-b border-gray-100 flex items-center gap-3",children:[(0,t.jsx)("span",{className:"text-xl",children:"ðŸ”"}),(0,t.jsx)("input",{ref:x,type:"text",value:n,onChange:s,onKeyDown:e=>{"Enter"!==e.key||0!==l.length||u||d()},placeholder:"Type to search or create...",className:"flex-1 text-xl font-light outline-none bg-transparent h-10"}),(0,t.jsx)("div",{className:"text-xs text-gray-400 border border-gray-200 px-2 py-1 rounded",children:"ESC to close"})]}),(0,t.jsx)("div",{className:"bg-gray-50 max-h-[60vh] overflow-y-auto",children:o?(0,t.jsx)("div",{className:"p-8 text-center text-gray-400",children:"Searching..."}):(0,t.jsxs)(t.Fragment,{children:[n&&!u&&(0,t.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-b border-blue-100",children:(0,t.jsxs)("div",{className:"p-4 space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,t.jsx)("span",{className:"text-2xl font-bold text-gray-800",children:n}),b&&(0,t.jsx)("span",{className:"text-sm text-gray-600 font-mono bg-white px-2 py-1 rounded border border-gray-200",children:b}),w&&(0,t.jsx)("span",{className:"text-[10px] uppercase font-bold text-indigo-600 bg-indigo-100 border border-indigo-200 px-2 py-1 rounded",children:w}),(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),h(n,e)},className:"p-2 hover:bg-blue-100 rounded-full transition-colors",title:"Play pronunciation",children:"ðŸ”Š"}),(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),g({id:"temp",word:n,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),occurrence:0,isStarred:!1,pronunciationScores:[]},e)},className:"p-2 hover:bg-green-100 rounded-full transition-colors",title:"Test pronunciation",children:"ðŸŽ¤"})]}),v?(0,t.jsx)("div",{className:"text-sm text-gray-500 italic animate-pulse",children:"Loading..."}):p?(0,t.jsxs)("div",{className:"bg-white rounded-lg p-3 border border-blue-200",children:[(0,t.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"ðŸŒ Google Translate"}),(0,t.jsx)("div",{className:"text-base text-gray-800 font-medium",children:p})]}):null]})}),n&&!u&&(0,t.jsxs)("div",{className:"p-4 bg-indigo-50 border-b border-indigo-100 flex justify-between items-center group cursor-pointer hover:bg-indigo-100 transition-colors",onClick:d,children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full bg-indigo-200 text-indigo-700 flex items-center justify-center font-bold text-xl",children:"+"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"font-bold text-indigo-800",children:['Create "',n,'"']}),(0,t.jsx)("div",{className:"text-xs text-indigo-500",children:"Auto-fill meaning & pronunciation"})]})]}),(0,t.jsx)("span",{className:"text-sm font-semibold text-indigo-600 bg-white px-3 py-1 rounded-full shadow-sm",children:"Enter â†µ"})]}),l.length>0?(0,t.jsx)("ul",{className:"divide-y divide-gray-100",children:l.map(e=>(0,t.jsx)("li",{onClick:()=>{m(e),c(e)},className:"p-3 hover:bg-indigo-50 cursor-pointer transition-colors group",children:(0,t.jsxs)("div",{className:"flex justify-between items-start gap-3",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)("span",{className:"font-bold text-lg text-indigo-700",children:e.word}),(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),g(e,t)},className:"text-gray-400 hover:text-green-600 p-1 rounded-full hover:bg-green-100",children:"ðŸŽ¤"}),(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),h(e.word,t)},className:"text-gray-400 hover:text-indigo-600 p-1 rounded-full hover:bg-indigo-100",children:"ðŸ”Š"}),e.partOfSpeech&&(0,t.jsx)("span",{className:"text-[10px] uppercase font-bold text-indigo-500 bg-indigo-50 border border-indigo-100 px-1.5 py-0.5 rounded",children:e.partOfSpeech})]}),(0,t.jsx)("div",{className:"text-sm text-gray-800 line-clamp-2",children:e.meaning||(0,t.jsx)("span",{className:"italic text-gray-400",children:"No meaning"})})]}),(0,t.jsxs)("div",{className:"text-right shrink-0 flex flex-col items-end gap-1",children:[e.topic&&(0,t.jsx)("span",{className:"text-[10px] text-gray-500 bg-gray-100 px-2 py-0.5 rounded-full",children:e.topic}),e.isStarred&&(0,t.jsx)("span",{className:"text-yellow-400 text-xs",children:"â˜…"})]})]})},e.id))}):!u&&n&&!p&&!v&&(0,t.jsx)("div",{className:"p-4 text-center text-gray-400 text-sm",children:"No existing words match."})]})})]})}):null}function P(){let e,d,u,h,g,m,p,f,b,y,w,j,v,S,k,A,E,P,_=(0,r.c)(109),{token:D,isLoading:T}=(0,n.useAuth)(),$=(0,s.useRouter)(),L=(0,s.useSearchParams)();_[0]!==L?(e=L.get("iframeMode"),_[0]=L,_[1]=e):e=_[1];let R="true"===e,{vocabs:z,loading:M,page:I,setPage:B,totalPages:W,showStarredOnly:F,setShowStarredOnly:U,filters:K,sortConfig:V,columnOrder:q,draggedCol:G,fetchVocabs:Q,handleFilterChange:X,handleSort:H,handleToggleStar:J,triggerInteraction:Z,handleDragStart:Y,handleDragOver:ee,handleDragEnd:et}=(e=>{let[t,r]=(0,a.useState)([]),[n,s]=(0,a.useState)(!1),[i,o]=(0,a.useState)(1),[c,d]=(0,a.useState)(1),[u,x]=(0,a.useState)(!1),[h,g]=(0,a.useState)({word:"",topic:"",partOfSpeech:"",meaning:""}),[m,p]=(0,a.useState)({key:"updatedAt",direction:"desc"}),[f,b]=(0,a.useState)(["star","updatedAt","topic","word","pronunciation","meaning","example","relatedWords","occurrence","score","actions"]),[y,w]=(0,a.useState)(null),j=(0,a.useRef)(null),v=(0,a.useCallback)(async(t=1,a=h,n=m,i=u)=>{if(e){s(!0);try{let s={page:t,limit:20,...a,sortBy:n.key,sortOrder:n.direction};i&&(s.isStarred="true");let c=await l.default.get("/vocabulary",{headers:{Authorization:`Bearer ${e}`},params:s});r(c.data.data),d(c.data.meta.lastPage),o(c.data.meta.page)}catch(e){console.error("Fetch error:",e)}finally{s(!1)}}},[e,h,m,u]);return(0,a.useEffect)(()=>{v()},[v]),{vocabs:t,loading:n,page:i,setPage:o,totalPages:c,showStarredOnly:u,setShowStarredOnly:x,filters:h,sortConfig:m,columnOrder:f,draggedCol:y,fetchVocabs:v,handleFilterChange:(e,t)=>{let r={...h,[e]:t};g(r),j.current&&clearTimeout(j.current),j.current=setTimeout(()=>v(1,r,m),500)},handleSort:e=>{let t="asc";m.key===e&&"asc"===m.direction&&(t="desc");let r={key:e,direction:t};p(r),v(1,h,r)},handleToggleStar:async(t,a,n)=>{n&&n.stopPropagation(),r(e=>e.map(e=>e.id===t?{...e,isStarred:!a}:e));try{await l.default.patch(`/vocabulary/${t}`,{isStarred:!a},{headers:{Authorization:`Bearer ${e}`}})}catch(e){console.error("Failed to star",e),r(e=>e.map(e=>e.id===t?{...e,isStarred:a}:e))}},triggerInteraction:async t=>{try{let a=(t.occurrence||0)+1,n=new Date().toISOString();r(e=>e.map(e=>e.id===t.id?{...e,occurrence:a,updatedAt:n}:e)),await l.default.patch(`/vocabulary/${t.id}`,{occurrence:a},{headers:{Authorization:`Bearer ${e}`}})}catch(e){console.error("Interaction update failed",e),r(e=>e.map(e=>e.id===t.id?{...e,occurrence:t.occurrence,updatedAt:t.updatedAt}:e))}},handleDragStart:(e,t)=>{w(t),e.dataTransfer.effectAllowed="move"},handleDragOver:(e,t)=>{if(e.preventDefault(),!y||y===t)return;let r=[...f],a=r.indexOf(y),n=r.indexOf(t);-1!==a&&-1!==n&&(r.splice(a,1),r.splice(n,0,y),b(r))},handleDragEnd:()=>{w(null)}}})(D);_[2]!==Q||_[3]!==I?(d=()=>Q(I),_[2]=Q,_[3]=I,_[4]=d):d=_[4];let{selectedVocab:er,isModalOpen:ea,setIsModalOpen:en,isAutoFilling:es,formData:el,setFormData:ei,fileInputRef:eo,isUploading:ec,handleRowClick:ed,handleOpenCreateModal:eu,handleSave:ex,handleDelete:eh,handleFileChange:eg,fetchAutoFillData:em}=((e,t)=>{let[r,n]=(0,a.useState)(null),[s,o]=(0,a.useState)(!1),[c,d]=(0,a.useState)(!1),[u,x]=(0,a.useState)({word:"",meaning:"",example:"",topic:"",partOfSpeech:"",relatedWords:"",pronunciation:""}),h=(0,a.useRef)(null),[g,m]=(0,a.useState)(!1),p=async t=>{try{let r=(t.occurrence||0)+1;await l.default.patch(`/vocabulary/${t.id}`,{occurrence:r},{headers:{Authorization:`Bearer ${e}`}})}catch(e){console.error("Interaction update failed",e)}},f=async e=>{if(!e)return null;d(!0);try{let t=i.default.get(`https://api.dictionaryapi.dev/api/v2/entries/en/${e}`).catch(()=>null),r=i.default.get(`https://translate.googleapis.com/translate_a/single?client=gtx&sl=en&tl=vi&dt=t&q=${encodeURIComponent(e)}`).catch(()=>null),[a,n]=await Promise.all([t,r]),s={word:e};if(a&&a.data&&a.data[0]){let e=a.data[0];if(e.phonetic)s.pronunciation=e.phonetic;else if(e.phonetics&&e.phonetics.length>0){let t=e.phonetics.find(e=>e.text&&e.audio);s.pronunciation=t?t.text:e.phonetics[0].text}if(e.meanings&&e.meanings.length>0){let t=e.meanings[0];if(s.partOfSpeech=t.partOfSpeech,t.definitions){let e=t.definitions.find(e=>e.example);e&&(s.example=e.example)}}}return n&&n.data&&n.data[0]&&(s.meaning=n.data[0].map(e=>e[0]).join("")),s}catch(e){return console.error("Auto-fill error:",e),null}finally{d(!1)}},b=async(e="")=>{if(n(null),o(!0),x({word:e,meaning:"",example:"",topic:"",partOfSpeech:"",relatedWords:"",pronunciation:""}),e){let t=await f(e);t&&x(e=>({...e,...t}))}},y=async()=>{if(!e||!u.word)return void alert("Word is required!");try{r?await l.default.patch(`/vocabulary/${r.id}`,u,{headers:{Authorization:`Bearer ${e}`}}):await l.default.post("/vocabulary",{...u,isStarred:!1},{headers:{Authorization:`Bearer ${e}`}}),o(!1),t()}catch(e){console.error("Save failed",e),alert("Failed to save.")}},w=async r=>{if(confirm("Delete this word?"))try{await l.default.delete(`/vocabulary/${r}`,{headers:{Authorization:`Bearer ${e}`}}),t(),o(!1)}catch(e){alert("Failed")}},j=async r=>{let a=r.target.files?.[0];if(!a||!e)return;let n=new FormData;n.append("file",a);try{m(!0),await l.default.post("/vocabulary/import/csv",n,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"multipart/form-data"}}),alert("Import success!"),t(1)}catch(e){alert("Import failed!")}finally{m(!1),h.current&&(h.current.value="")}};return{selectedVocab:r,isModalOpen:s,setIsModalOpen:o,isAutoFilling:c,formData:u,setFormData:x,fileInputRef:h,isUploading:g,handleRowClick:e=>{n(e),x({word:e.word,meaning:e.meaning||"",example:e.example||"",topic:e.topic||"",partOfSpeech:e.partOfSpeech||"",relatedWords:e.relatedWords||"",pronunciation:e.pronunciation||""}),o(!0),p(e)},handleOpenCreateModal:b,handleSave:y,handleDelete:w,handleFileChange:j,fetchAutoFillData:f}})(D,d);_[5]!==Q||_[6]!==I?(u=()=>Q(I),_[5]=Q,_[6]=I,_[7]=u):u=_[7];let{isAssessmentModalOpen:ep,setIsAssessmentModalOpen:ef,recordingVocabItem:eb,isRecording:ey,assessmentResult:ew,assessmentError:ej,isProcessingAudio:ev,userAudioUrl:eN,startRecording:eS,stopRecording:eC,handleOpenAssessment:ek,handleSpeak:eA}=((e,t,r)=>{let[n,s]=(0,a.useState)(!1),[c,d]=(0,a.useState)(null),[u,x]=(0,a.useState)(!1),[h,g]=(0,a.useState)(null),[m,p]=(0,a.useState)(""),[f,b]=(0,a.useState)(!1),y=(0,a.useRef)(null),w=(0,a.useRef)([]),[j,v]=(0,a.useState)(null),N=async()=>{try{let e=await navigator.mediaDevices.getUserMedia({audio:!0}),t=new MediaRecorder(e);y.current=t,w.current=[],t.ondataavailable=e=>{e.data.size>0&&w.current.push(e.data)},t.onstop=async()=>{let t=new Blob(w.current,{type:"audio/webm"}),r=URL.createObjectURL(t);v(r),await C(t),e.getTracks().forEach(e=>e.stop())},t.start(),x(!0),p("")}catch(e){p("Microphone access denied.")}},S=()=>{y.current&&u&&(y.current.stop(),x(!1))};(0,a.useEffect)(()=>{let e;return n?e=setTimeout(()=>{u||N()},300):S(),()=>clearTimeout(e)},[n]);let C=async a=>{if(c){b(!0);try{let n=localStorage.getItem("azureKey"),s=localStorage.getItem("azureRegion");if(!n||!s)throw Error("Missing Azure Keys.");let d=await o(a),u={ReferenceText:c.word,GradingSystem:"HundredMark",Granularity:"Phoneme",Dimension:"Comprehensive",PhonemeAlphabet:"IPA"},x=btoa(JSON.stringify(u)),h=`https://${s}.stt.speech.microsoft.com/speech/recognition/conversation/cognitiveservices/v1?language=en-US`,m=(await i.default.post(h,d,{headers:{"Ocp-Apim-Subscription-Key":n,"Content-Type":"audio/wav; codecs=audio/pcm; samplerate=16000",Accept:"application/json","Pronunciation-Assessment":x}})).data;if(m.NBest&&m.NBest[0]){let a=m.NBest[0],n=a.PronunciationAssessment?.AccuracyScore||a.AccuracyScore;g({AccuracyScore:n,Words:a.Words}),"temp"!==c.id&&(await l.default.patch(`/vocabulary/${c.id}/score`,{score:Math.round(n)},{headers:{Authorization:`Bearer ${e}`}}),t(r))}else p("Could not recognize speech.")}catch(e){p(e.message)}finally{b(!1)}}};return{isAssessmentModalOpen:n,setIsAssessmentModalOpen:s,recordingVocabItem:c,isRecording:u,assessmentResult:h,assessmentError:m,isProcessingAudio:f,userAudioUrl:j,startRecording:N,stopRecording:S,handleOpenAssessment:(e,t)=>{t&&t.stopPropagation(),d("id"in e?e:{...e,id:"temp",occurrence:0,isStarred:!1,pronunciationScores:[],createdAt:"",updatedAt:""}),g(null),p(""),v(null),s(!0)},handleSpeak:(e,t)=>{if(t&&t.stopPropagation(),!e)return;window.speechSynthesis.cancel();let r=new SpeechSynthesisUtterance(e);r.lang="en-US",r.rate=.9;let a=(()=>{let e=window.speechSynthesis.getVoices(),t=e.find(e=>e.name.includes("Microsoft Aria Online"));if(t)return t;let r=e.find(e=>e.name.includes("Aria"));return r||e.find(e=>"en-US"===e.lang&&!e.name.includes("Zira"))})();a&&(r.voice=a),window.speechSynthesis.speak(r)}}})(D,u,I),{showSearch:eE,setShowSearch:eO,quickSearchText:eP,quickSearchResults:e_,isSearching:eD,searchInputRef:eT,hasExactMatch:e$,handleQuickSearchChange:eL}=((e,t)=>{let[r,n]=(0,a.useState)(!1),[i,o]=(0,a.useState)(""),[c,d]=(0,a.useState)([]),[u,x]=(0,a.useState)(!1),h=(0,a.useRef)(null),g=(0,a.useRef)(null),m=(0,s.useSearchParams)(),p=(0,s.usePathname)();(0,a.useEffect)(()=>{let e=p?.endsWith("/search"),t="true"===m.get("openSearch");(e||t)&&(n(!0),o(""),setTimeout(()=>{h.current&&h.current.focus()},100))},[p,m]),(0,a.useEffect)(()=>{let e=0,t=t=>{let a=t.target;if(!("INPUT"===a.tagName||"TEXTAREA"===a.tagName||a.isContentEditable)||r){if("Space"===t.code){let r=new Date().getTime();r-e<300&&(t.preventDefault(),n(!0),o(""),d([]),setTimeout(()=>h.current?.focus(),100)),e=r}"Escape"===t.code&&n(!1)}};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[r]);let f=async t=>{if(!e||!t.trim())return void d([]);x(!0);try{let r=await l.default.get("/vocabulary",{headers:{Authorization:`Bearer ${e}`},params:{page:1,limit:5,search:t,sortBy:"word",sortOrder:"asc"}});d(r.data.data)}catch(e){console.error("Quick search error",e)}finally{x(!1)}},b=c.some(e=>e.word.toLowerCase()===i.trim().toLowerCase());return{showSearch:r,setShowSearch:n,quickSearchText:i,setQuickSearchText:o,quickSearchResults:c,isSearching:u,searchInputRef:h,hasExactMatch:b,handleQuickSearchChange:e=>{let t=e.target.value;o(t),g.current&&clearTimeout(g.current),g.current=setTimeout(()=>f(t),300)}}})(D,0);if(_[8]!==R||_[9]!==ef||_[10]!==en||_[11]!==eO?(h=()=>{let e=e=>{"Escape"===e.code&&(R&&window.parent.postMessage("CLOSE_EXTENSION_IFRAME","*"),eO(!1),en(!1),ef(!1))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},g=[ef,en,eO,R],_[8]=R,_[9]=ef,_[10]=en,_[11]=eO,_[12]=h,_[13]=g):(h=_[12],g=_[13]),(0,a.useEffect)(h,g),_[14]!==T||_[15]!==$||_[16]!==D?(m=()=>{T||D||$.push("/login")},p=[D,T,$],_[14]=T,_[15]=$,_[16]=D,_[17]=m,_[18]=p):(m=_[17],p=_[18]),(0,a.useEffect)(m,p),T){let e;return _[19]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Loading..."})]})}),_[19]=e):e=_[19],e}if(!D)return null;let eR=`min-h-screen ${R?"bg-transparent":"bg-gray-50"} p-6 text-black relative`;_[20]!==ef?(f=()=>ef(!1),_[20]=ef,_[21]=f):f=_[21],_[22]!==ej||_[23]!==ew||_[24]!==eA||_[25]!==ep||_[26]!==ev||_[27]!==ey||_[28]!==eb||_[29]!==eS||_[30]!==eC||_[31]!==f||_[32]!==eN?(b=(0,t.jsx)(C,{isOpen:ep,onClose:f,vocabItem:eb,isRecording:ey,assessmentResult:ew,assessmentError:ej,isProcessingAudio:ev,userAudioUrl:eN,startRecording:eS,stopRecording:eC,handleSpeak:eA}),_[22]=ej,_[23]=ew,_[24]=eA,_[25]=ep,_[26]=ev,_[27]=ey,_[28]=eb,_[29]=eS,_[30]=eC,_[31]=f,_[32]=eN,_[33]=b):b=_[33],_[34]!==R||_[35]!==eO?(y=()=>{eO(!1),R&&window.parent.postMessage("CLOSE_EXTENSION_IFRAME","*")},_[34]=R,_[35]=eO,_[36]=y):y=_[36],_[37]!==ed||_[38]!==eO?(w=e=>{eO(!1),ed(e)},_[37]=ed,_[38]=eO,_[39]=w):w=_[39],_[40]!==eu||_[41]!==eP?(j=()=>eu(eP),_[40]=eu,_[41]=eP,_[42]=j):j=_[42],_[43]!==ek||_[44]!==eL||_[45]!==eA||_[46]!==e$||_[47]!==eD||_[48]!==e_||_[49]!==eP||_[50]!==eE||_[51]!==y||_[52]!==w||_[53]!==j||_[54]!==eT||_[55]!==Z?(v=(0,t.jsx)(O,{isOpen:eE,onClose:y,searchText:eP,onSearchChange:eL,results:e_,isSearching:eD,onSelect:w,onCreate:j,hasExactMatch:e$,searchInputRef:eT,handleSpeak:eA,handleOpenAssessment:ek,triggerInteraction:Z}),_[43]=ek,_[44]=eL,_[45]=eA,_[46]=e$,_[47]=eD,_[48]=e_,_[49]=eP,_[50]=eE,_[51]=y,_[52]=w,_[53]=j,_[54]=eT,_[55]=Z,_[56]=v):v=_[56],_[57]!==en?(S=()=>en(!1),_[57]=en,_[58]=S):S=_[58];let ez=!!er;return _[59]!==eh||_[60]!==er?(k=()=>er&&eh(er.id),_[59]=eh,_[60]=er,_[61]=k):k=_[61],_[62]!==em||_[63]!==el||_[64]!==ek||_[65]!==ex||_[66]!==eA||_[67]!==es||_[68]!==ea||_[69]!==er||_[70]!==ei||_[71]!==S||_[72]!==ez||_[73]!==k?(A=(0,t.jsx)(N,{isOpen:ea,onClose:S,initialData:el,setInitialData:ei,isEditMode:ez,onSave:ex,onDelete:k,isAutoFilling:es,fetchAutoFillData:em,handleOpenAssessment:ek,handleSpeak:eA,selectedVocab:er}),_[62]=em,_[63]=el,_[64]=ek,_[65]=ex,_[66]=eA,_[67]=es,_[68]=ea,_[69]=er,_[70]=ei,_[71]=S,_[72]=ez,_[73]=k,_[74]=A):A=_[74],_[75]!==q||_[76]!==G||_[77]!==Q||_[78]!==eo||_[79]!==K||_[80]!==et||_[81]!==ee||_[82]!==Y||_[83]!==eg||_[84]!==X||_[85]!==ek||_[86]!==eu||_[87]!==ed||_[88]!==H||_[89]!==eA||_[90]!==J||_[91]!==R||_[92]!==ec||_[93]!==M||_[94]!==I||_[95]!==B||_[96]!==U||_[97]!==F||_[98]!==V||_[99]!==W||_[100]!==Z||_[101]!==z?(E=R?(0,t.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,t.jsx)("div",{className:"text-gray-400 text-sm"})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"My Vocabulary"}),(0,t.jsxs)("p",{className:"text-gray-500 text-sm mt-1",children:["Double-tap"," ",(0,t.jsx)("kbd",{className:"bg-gray-200 px-1.5 py-0.5 rounded text-xs border border-gray-300 font-mono",children:"Space"})," ","to Quick Search / Create"]})]}),(0,t.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,t.jsxs)("button",{onClick:()=>eu(""),className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg shadow flex items-center gap-2 font-medium",children:[(0,t.jsx)("span",{children:"+"})," New Word"]}),(0,t.jsxs)("button",{onClick:()=>{let e=!F;U(e),Q(1,K,V,e)},className:`px-4 py-2 rounded-lg border flex items-center gap-2 transition-colors ${F?"bg-yellow-50 border-yellow-400 text-yellow-700":"bg-white border-gray-300 text-gray-600"}`,children:[(0,t.jsx)(c,{filled:F,className:F?"text-yellow-500":"text-gray-400"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:F?"Starred":"All"})]}),(0,t.jsx)("input",{type:"file",ref:eo,onChange:eg,accept:".csv",className:"hidden"}),(0,t.jsx)("button",{onClick:()=>eo.current?.click(),disabled:ec,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg shadow flex items-center gap-2 text-sm font-medium",children:ec?"...":"\uD83D\uDCC2 CSV"})]})]}),(0,t.jsx)(x,{vocabs:z,loading:M,columnOrder:q,draggedCol:G,sortConfig:V,filters:K,page:I,totalPages:W,handleDragStart:Y,handleDragOver:ee,handleDragEnd:et,handleSort:H,handleFilterChange:X,handleRowClick:ed,handleToggleStar:J,handleOpenAssessment:ek,handleSpeak:eA,triggerInteraction:Z,fetchVocabs:Q,setPage:B})]}),_[75]=q,_[76]=G,_[77]=Q,_[78]=eo,_[79]=K,_[80]=et,_[81]=ee,_[82]=Y,_[83]=eg,_[84]=X,_[85]=ek,_[86]=eu,_[87]=ed,_[88]=H,_[89]=eA,_[90]=J,_[91]=R,_[92]=ec,_[93]=M,_[94]=I,_[95]=B,_[96]=U,_[97]=F,_[98]=V,_[99]=W,_[100]=Z,_[101]=z,_[102]=E):E=_[102],_[103]!==v||_[104]!==A||_[105]!==E||_[106]!==eR||_[107]!==b?(P=(0,t.jsxs)("div",{className:eR,children:[b,v,A,E]}),_[103]=v,_[104]=A,_[105]=E,_[106]=eR,_[107]=b,_[108]=P):P=_[108],P}function _(){let e,n=(0,r.c)(1);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)(a.Suspense,{fallback:(0,t.jsx)("div",{className:"p-4 text-center",children:"Loading vocabulary..."}),children:(0,t.jsx)(P,{})}),n[0]=e):e=n[0],e}e.s(["default",()=>_],95153)}]);