{"version":3,"sources":["../../../../app/vocabulary/page.tsx","../../../../hooks/vocabulary/useVocabData.ts","../../../../hooks/vocabulary/useVocabModals.ts","../../../../hooks/vocabulary/usePronunciationAssessment.ts","../../../../hooks/vocabulary/useQuickSearch.ts","../../../../components/Icons.tsx","../../../../components/vocabulary/VocabTable.tsx","../../../../components/vocabulary/VocabFormModal.tsx","../../../../components/vocabulary/AssessmentModal.tsx","../../../../components/vocabulary/QuickSearchModal.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState, useRef, useEffect, Suspense } from 'react';\r\nimport { useAuth } from \"@/contexts/AuthContext\";\r\nimport { useRouter, useSearchParams } from \"next/navigation\";\r\n\r\nimport useVocabData from \"@/hooks/vocabulary/useVocabData\";\r\nimport useVocabModals from \"@/hooks/vocabulary/useVocabModals\";\r\n\r\nimport usePronunciationAssessment from \"@/hooks/vocabulary/usePronunciationAssessment\";\r\nimport useQuickSearch from \"@/hooks/vocabulary/useQuickSearch\";\r\n\r\nimport VocabTable from \"@/components/vocabulary/VocabTable\";\r\nimport VocabFormModal from \"@/components/vocabulary/VocabFormModal\";\r\nimport AssessmentModal from \"@/components/vocabulary/AssessmentModal\";\r\nimport QuickSearchModal from \"@/components/vocabulary/QuickSearchModal\";\r\nimport { StarIcon } from \"@/components/Icons\";\r\n\r\nfunction VocabularyContent() {\r\n  const { token, isLoading } = useAuth();\r\n  const router = useRouter();\r\n  const searchParams = useSearchParams();\r\n  \r\n  // Check if in iframe mode\r\n  const isIframeMode = searchParams.get(\"iframeMode\") === \"true\";\r\n\r\n  // QUAN TR·ªåNG: G·ªçi T·∫§T C·∫¢ hooks TR∆Ø·ªöC khi c√≥ b·∫•t k·ª≥ return n√†o\r\n  const {\r\n    vocabs,\r\n    loading,\r\n    page,\r\n    setPage,\r\n    totalPages,\r\n    showStarredOnly,\r\n    setShowStarredOnly,\r\n    filters,\r\n    sortConfig,\r\n    columnOrder,\r\n    draggedCol,\r\n    fetchVocabs,\r\n    handleFilterChange,\r\n    handleSort,\r\n    handleToggleStar,\r\n    triggerInteraction,\r\n    handleDragStart,\r\n    handleDragOver,\r\n    handleDragEnd,\r\n  } = useVocabData(token);\r\n\r\n  const {\r\n    selectedVocab,\r\n    isModalOpen,\r\n    setIsModalOpen,\r\n    isAutoFilling,\r\n    formData,\r\n    setFormData,\r\n    fileInputRef,\r\n    isUploading,\r\n    handleRowClick,\r\n    handleOpenCreateModal,\r\n    handleSave,\r\n    handleDelete,\r\n    handleFileChange,\r\n    fetchAutoFillData,\r\n  } = useVocabModals(token, () => fetchVocabs(page));\r\n\r\n  const {\r\n    isAssessmentModalOpen,\r\n    setIsAssessmentModalOpen,\r\n    recordingVocabItem,\r\n    isRecording,\r\n    assessmentResult,\r\n    assessmentError,\r\n    isProcessingAudio,\r\n    userAudioUrl,\r\n    startRecording,\r\n    stopRecording,\r\n    handleOpenAssessment,\r\n    handleSpeak,\r\n  } = usePronunciationAssessment(token, () => fetchVocabs(page), page);\r\n\r\n  const {\r\n    showSearch,\r\n    setShowSearch,\r\n    quickSearchText,\r\n    quickSearchResults,\r\n    isSearching,\r\n    searchInputRef,\r\n    hasExactMatch,\r\n    handleQuickSearchChange,\r\n  } = useQuickSearch(token, handleOpenCreateModal);\r\n\r\n  useEffect(() => {\r\n    const handleKeyDown = (e: KeyboardEvent) => {\r\n      if (e.code === \"Escape\") {\r\n        // N·∫øu ƒëang trong iframe mode, g·ª≠i message ƒë·ªÉ ƒë√≥ng\r\n        if (isIframeMode) {\r\n          window.parent.postMessage(\"CLOSE_EXTENSION_IFRAME\", \"*\");\r\n        }\r\n        setShowSearch(false);\r\n        setIsModalOpen(false);\r\n        setIsAssessmentModalOpen(false);\r\n      }\r\n    };\r\n    window.addEventListener(\"keydown\", handleKeyDown);\r\n    return () => window.removeEventListener(\"keydown\", handleKeyDown);\r\n  }, [setIsAssessmentModalOpen, setIsModalOpen, setShowSearch, isIframeMode]);\r\n\r\n  // Redirect to login if not authenticated (AFTER all hooks)\r\n  useEffect(() => {\r\n    if (!isLoading && !token) {\r\n      router.push(\"/login\");\r\n    }\r\n  }, [token, isLoading, router]);\r\n\r\n  // Hi·ªÉn th·ªã loading khi ƒëang check auth\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4\"></div>\r\n          <p className=\"text-gray-600\">Loading...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // N·∫øu kh√¥ng c√≥ token sau khi load xong, ƒë·ª´ng render g√¨ (ƒëang redirect)\r\n  if (!token) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className={`min-h-screen ${isIframeMode ? 'bg-transparent' : 'bg-gray-50'} p-6 text-black relative`}>\r\n      <AssessmentModal\r\n        isOpen={isAssessmentModalOpen}\r\n        onClose={() => setIsAssessmentModalOpen(false)}\r\n        vocabItem={recordingVocabItem}\r\n        isRecording={isRecording}\r\n        assessmentResult={assessmentResult}\r\n        assessmentError={assessmentError}\r\n        isProcessingAudio={isProcessingAudio}\r\n        userAudioUrl={userAudioUrl}\r\n        startRecording={startRecording}\r\n        stopRecording={stopRecording}\r\n        handleSpeak={handleSpeak}\r\n      />\r\n\r\n      <QuickSearchModal\r\n        isOpen={showSearch}\r\n        onClose={() => {\r\n          setShowSearch(false);\r\n          // N·∫øu ƒëang trong iframe mode v√† ƒë√≥ng search, th√¨ ƒë√≥ng c·∫£ iframe\r\n          if (isIframeMode) {\r\n            window.parent.postMessage(\"CLOSE_EXTENSION_IFRAME\", \"*\");\r\n          }\r\n        }}\r\n        searchText={quickSearchText}\r\n        onSearchChange={handleQuickSearchChange}\r\n        results={quickSearchResults}\r\n        isSearching={isSearching}\r\n        onSelect={(vocab) => {\r\n          setShowSearch(false);\r\n          handleRowClick(vocab);\r\n        }}\r\n        onCreate={() => handleOpenCreateModal(quickSearchText)}\r\n        hasExactMatch={hasExactMatch}\r\n        searchInputRef={searchInputRef as React.RefObject<HTMLInputElement>}\r\n        handleSpeak={handleSpeak}\r\n        handleOpenAssessment={handleOpenAssessment}\r\n        triggerInteraction={triggerInteraction}\r\n      />\r\n\r\n      <VocabFormModal\r\n        isOpen={isModalOpen}\r\n        onClose={() => setIsModalOpen(false)}\r\n        initialData={formData}\r\n        setInitialData={setFormData}\r\n        isEditMode={!!selectedVocab}\r\n        onSave={handleSave}\r\n        onDelete={() => selectedVocab && handleDelete(selectedVocab.id)}\r\n        isAutoFilling={isAutoFilling}\r\n        fetchAutoFillData={fetchAutoFillData}\r\n        handleOpenAssessment={handleOpenAssessment}\r\n        handleSpeak={handleSpeak}\r\n        selectedVocab={selectedVocab}\r\n      />\r\n\r\n      {/* CH·∫†Y TRONG IFRAME MODE: Ch·ªâ hi·ªán QuickSearchModal, ·∫©n h·∫øt ph·∫ßn c√≤n l·∫°i */}\r\n      {isIframeMode ? (\r\n        <div className=\"flex items-center justify-center h-screen\">\r\n          <div className=\"text-gray-400 text-sm\">\r\n            {/* Placeholder - QuickSearchModal s·∫Ω t·ª± ƒë·ªông m·ªü */}\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <>\r\n          {/* PAGE HEADER - CH·ªà HI·ªÜN KHI KH√îNG PH·∫¢I IFRAME MODE */}\r\n          <div className=\"flex flex-col md:flex-row justify-between items-center mb-6 gap-4\">\r\n            <div>\r\n              <h1 className=\"text-3xl font-bold text-gray-800\">My Vocabulary</h1>\r\n              <p className=\"text-gray-500 text-sm mt-1\">\r\n                Double-tap{\" \"}\r\n                <kbd className=\"bg-gray-200 px-1.5 py-0.5 rounded text-xs border border-gray-300 font-mono\">\r\n                  Space\r\n                </kbd>{\" \"}\r\n                to Quick Search / Create\r\n              </p>\r\n            </div>\r\n            <div className=\"flex gap-2 items-center\">\r\n              <button\r\n                onClick={() => handleOpenCreateModal(\"\")}\r\n                className=\"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg shadow flex items-center gap-2 font-medium\"\r\n              >\r\n                <span>+</span> New Word\r\n              </button>\r\n              <button\r\n                onClick={() => {\r\n                  const newValue = !showStarredOnly;\r\n                  setShowStarredOnly(newValue);\r\n                  fetchVocabs(1, filters, sortConfig, newValue);\r\n                }}\r\n                className={`px-4 py-2 rounded-lg border flex items-center gap-2 transition-colors ${\r\n                  showStarredOnly\r\n                    ? \"bg-yellow-50 border-yellow-400 text-yellow-700\"\r\n                    : \"bg-white border-gray-300 text-gray-600\"\r\n                }`}\r\n              >\r\n                <StarIcon\r\n                  filled={showStarredOnly}\r\n                  className={showStarredOnly ? \"text-yellow-500\" : \"text-gray-400\"}\r\n                />\r\n                <span className=\"text-sm font-medium\">\r\n                  {showStarredOnly ? \"Starred\" : \"All\"}\r\n                </span>\r\n              </button>\r\n              <input\r\n                type=\"file\"\r\n                ref={fileInputRef}\r\n                onChange={handleFileChange}\r\n                accept=\".csv\"\r\n                className=\"hidden\"\r\n              />\r\n              <button\r\n                onClick={() => fileInputRef.current?.click()}\r\n                disabled={isUploading}\r\n                className=\"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg shadow flex items-center gap-2 text-sm font-medium\"\r\n              >\r\n                {isUploading ? \"...\" : \"üìÇ CSV\"}\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          <VocabTable\r\n            vocabs={vocabs}\r\n            loading={loading}\r\n            columnOrder={columnOrder}\r\n            draggedCol={draggedCol}\r\n            sortConfig={sortConfig}\r\n            filters={filters}\r\n            page={page}\r\n            totalPages={totalPages}\r\n            handleDragStart={handleDragStart}\r\n            handleDragOver={handleDragOver}\r\n            handleDragEnd={handleDragEnd}\r\n            handleSort={handleSort}\r\n            handleFilterChange={handleFilterChange}\r\n            handleRowClick={handleRowClick}\r\n            handleToggleStar={handleToggleStar}\r\n            handleOpenAssessment={handleOpenAssessment}\r\n            handleSpeak={handleSpeak}\r\n            triggerInteraction={triggerInteraction}\r\n            fetchVocabs={fetchVocabs}\r\n            setPage={setPage}\r\n          />\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n// ... (Cu·ªëi file)\r\n\r\nexport default function VocabularyPage() {\r\n  return (\r\n    // Fallback l√† giao di·ªán hi·ªÉn th·ªã trong l√∫c ch·ªù ƒë·ªçc URL (th∆∞·ªùng r·∫•t nhanh)\r\n    <Suspense fallback={<div className=\"p-4 text-center\">Loading vocabulary...</div>}>\r\n      <VocabularyContent />\r\n    </Suspense>\r\n  );\r\n}","\r\nimport { useState, useCallback, useEffect, useRef } from \"react\";\r\nimport api from \"@/lib/api\"; // Import api\r\n\r\n// --- INTERFACES ---\r\nexport interface VocabItem {\r\n  id: string;\r\n  word: string;\r\n  topic?: string | null;\r\n  partOfSpeech?: string | null;\r\n  pronunciation?: string | null;\r\n  meaning?: string | null;\r\n  example?: string | null;\r\n  relatedWords?: string | null;\r\n  occurrence: number;\r\n  isStarred: boolean;\r\n  pronunciationScores: number[];\r\n  createdAt: string;\r\n  updatedAt: string;\r\n}\r\n\r\nexport interface FilterState {\r\n  word: string;\r\n  topic: string;\r\n  partOfSpeech: string;\r\n  meaning: string;\r\n}\r\n\r\nexport interface SortState {\r\n  key: string;\r\n  direction: \"asc\" | \"desc\";\r\n}\r\n\r\nconst useVocabData = (token: string | null) => {\r\n  const [vocabs, setVocabs] = useState<VocabItem[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [page, setPage] = useState(1);\r\n  const [totalPages, setTotalPages] = useState(1);\r\n  const [showStarredOnly, setShowStarredOnly] = useState(false);\r\n\r\n  const [filters, setFilters] = useState<FilterState>({\r\n    word: \"\",\r\n    topic: \"\",\r\n    partOfSpeech: \"\",\r\n    meaning: \"\",\r\n  });\r\n\r\n  const [sortConfig, setSortConfig] = useState<SortState>({\r\n    key: \"updatedAt\",\r\n    direction: \"desc\",\r\n  });\r\n\r\n  const [columnOrder, setColumnOrder] = useState<string[]>([\r\n    \"star\",\r\n    \"updatedAt\",\r\n    \"topic\",\r\n    \"word\",\r\n    \"pronunciation\",\r\n    \"meaning\",\r\n    \"example\",\r\n    \"relatedWords\",\r\n    \"occurrence\",\r\n    \"score\",\r\n    \"actions\",\r\n  ]);\r\n  const [draggedCol, setDraggedCol] = useState<string | null>(null);\r\n\r\n  const debounceRef = useRef<NodeJS.Timeout | null>(null);\r\n\r\n  const fetchVocabs = useCallback(\r\n    async (\r\n      pageNum = 1,\r\n      currentFilters = filters,\r\n      currentSort = sortConfig,\r\n      starred = showStarredOnly\r\n    ) => {\r\n      if (!token) return;\r\n      setLoading(true);\r\n      try {\r\n        const params: any = {\r\n          page: pageNum,\r\n          limit: 20,\r\n          ...currentFilters,\r\n          sortBy: currentSort.key,\r\n          sortOrder: currentSort.direction,\r\n        };\r\n        if (starred) params.isStarred = \"true\";\r\n        const res = await api.get(\"/vocabulary\", {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n          params: params,\r\n        });\r\n        setVocabs(res.data.data);\r\n        setTotalPages(res.data.meta.lastPage);\r\n        setPage(res.data.meta.page);\r\n      } catch (error) {\r\n        console.error(\"Fetch error:\", error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    },\r\n    [token, filters, sortConfig, showStarredOnly]\r\n  );\r\n\r\n  useEffect(() => {\r\n    fetchVocabs();\r\n  }, [fetchVocabs]);\r\n  \r\n  const handleFilterChange = (field: keyof FilterState, value: string) => {\r\n    const newFilters = { ...filters, [field]: value };\r\n    setFilters(newFilters);\r\n    if (debounceRef.current) clearTimeout(debounceRef.current);\r\n    debounceRef.current = setTimeout(\r\n      () => fetchVocabs(1, newFilters, sortConfig),\r\n      500\r\n    );\r\n  };\r\n\r\n  const handleSort = (key: string) => {\r\n    let direction: \"asc\" | \"desc\" = \"asc\";\r\n    if (sortConfig.key === key && sortConfig.direction === \"asc\")\r\n      direction = \"desc\";\r\n    const newSortConfig = { key, direction };\r\n    setSortConfig(newSortConfig);\r\n    fetchVocabs(1, filters, newSortConfig);\r\n  };\r\n\r\n  const handleToggleStar = async (\r\n    id: string,\r\n    currentStatus: boolean,\r\n    e?: React.MouseEvent\r\n  ) => {\r\n    if (e) e.stopPropagation();\r\n    \r\n    // Optimistic update\r\n    const toggleFunc = (list: VocabItem[]) =>\r\n    list.map((item) =>\r\n      item.id === id ? { ...item, isStarred: !currentStatus } : item\r\n    );\r\n    setVocabs(toggleFunc);\r\n\r\n    try {\r\n      await api.patch(\r\n        `/vocabulary/${id}`,\r\n        { isStarred: !currentStatus },\r\n        { headers: { Authorization: `Bearer ${token}` } }\r\n      );\r\n    } catch (error) {\r\n      console.error(\"Failed to star\", error);\r\n      // Revert on failure\r\n      setVocabs((prev) => \r\n        prev.map((item) =>\r\n          item.id === id ? { ...item, isStarred: currentStatus } : item\r\n        )\r\n      );\r\n    }\r\n  };\r\n\r\n  const triggerInteraction = async (vocab: VocabItem) => {\r\n    try {\r\n      const newOccurrence = (vocab.occurrence || 0) + 1;\r\n      const newTime = new Date().toISOString();\r\n      \r\n      // Optimistic update\r\n      setVocabs((prev) =>\r\n        prev.map((v) =>\r\n          v.id === vocab.id\r\n            ? { ...v, occurrence: newOccurrence, updatedAt: newTime }\r\n            : v\r\n        )\r\n      );\r\n      \r\n      await api.patch(\r\n        `/vocabulary/${vocab.id}`,\r\n        { occurrence: newOccurrence },\r\n        { headers: { Authorization: `Bearer ${token}` } }\r\n      );\r\n    } catch (e) {\r\n      console.error(\"Interaction update failed\", e);\r\n       // Revert on failure\r\n       setVocabs((prev) =>\r\n       prev.map((v) =>\r\n         v.id === vocab.id\r\n           ? { ...v, occurrence: vocab.occurrence, updatedAt: vocab.updatedAt }\r\n           : v\r\n       )\r\n     );\r\n    }\r\n  };\r\n\r\n  const handleDragStart = (e: React.DragEvent, colId: string) => {\r\n    setDraggedCol(colId);\r\n    e.dataTransfer.effectAllowed = \"move\";\r\n  };\r\n\r\n  const handleDragOver = (e: React.DragEvent, colId: string) => {\r\n    e.preventDefault();\r\n    if (!draggedCol || draggedCol === colId) return;\r\n    const newOrder = [...columnOrder];\r\n    const draggedIdx = newOrder.indexOf(draggedCol);\r\n    const targetIdx = newOrder.indexOf(colId);\r\n    if (draggedIdx !== -1 && targetIdx !== -1) {\r\n      newOrder.splice(draggedIdx, 1);\r\n      newOrder.splice(targetIdx, 0, draggedCol);\r\n      setColumnOrder(newOrder);\r\n    }\r\n  };\r\n  \r\n  const handleDragEnd = () => {\r\n    setDraggedCol(null);\r\n  };\r\n\r\n  return {\r\n    vocabs,\r\n    loading,\r\n    page,\r\n    setPage,\r\n    totalPages,\r\n    showStarredOnly,\r\n    setShowStarredOnly,\r\n    filters,\r\n    sortConfig,\r\n    columnOrder,\r\n    draggedCol,\r\n    fetchVocabs,\r\n    handleFilterChange,\r\n    handleSort,\r\n    handleToggleStar,\r\n    triggerInteraction,\r\n    handleDragStart,\r\n    handleDragOver,\r\n    handleDragEnd,\r\n  };\r\n};\r\n\r\nexport default useVocabData;\r\n","\r\nimport { useState, useRef } from \"react\";\r\nimport api from \"@/lib/api\"; // Import api for backend calls\r\nimport axios from \"axios\"; // Keep for external APIs (DictionaryAPI, Translate)\r\nimport { VocabItem } from \"./useVocabData\";\r\n\r\nexport interface VocabFormData {\r\n  word: string;\r\n  meaning: string;\r\n  example: string;\r\n  topic: string;\r\n  partOfSpeech: string;\r\n  relatedWords: string;\r\n  pronunciation: string;\r\n}\r\n\r\nconst useVocabModals = (\r\n  token: string | null,\r\n  fetchVocabs: (page?: number) => void\r\n) => {\r\n  const [selectedVocab, setSelectedVocab] = useState<VocabItem | null>(null);\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [isAutoFilling, setIsAutoFilling] = useState(false);\r\n  const [formData, setFormData] = useState<VocabFormData>({\r\n    word: \"\",\r\n    meaning: \"\",\r\n    example: \"\",\r\n    topic: \"\",\r\n    partOfSpeech: \"\",\r\n    relatedWords: \"\",\r\n    pronunciation: \"\",\r\n  });\r\n\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n  const [isUploading, setIsUploading] = useState(false);\r\n\r\n  const triggerInteraction = async (vocab: VocabItem) => {\r\n    try {\r\n      const newOccurrence = (vocab.occurrence || 0) + 1;\r\n      await api.patch(\r\n        `/vocabulary/${vocab.id}`,\r\n        { occurrence: newOccurrence },\r\n        { headers: { Authorization: `Bearer ${token}` } }\r\n      );\r\n    } catch (e) {\r\n      console.error(\"Interaction update failed\", e);\r\n    }\r\n  };\r\n\r\n  const handleRowClick = (vocab: VocabItem) => {\r\n    setSelectedVocab(vocab);\r\n    setFormData({\r\n      word: vocab.word,\r\n      meaning: vocab.meaning || \"\",\r\n      example: vocab.example || \"\",\r\n      topic: vocab.topic || \"\",\r\n      partOfSpeech: vocab.partOfSpeech || \"\",\r\n      relatedWords: vocab.relatedWords || \"\",\r\n      pronunciation: vocab.pronunciation || \"\",\r\n    });\r\n    setIsModalOpen(true);\r\n    triggerInteraction(vocab);\r\n  };\r\n\r\n  const fetchAutoFillData = async (word: string) => {\r\n    if (!word) return null;\r\n    setIsAutoFilling(true);\r\n    try {\r\n      const dictPromise = axios\r\n        .get(`https://api.dictionaryapi.dev/api/v2/entries/en/${word}`)\r\n        .catch(() => null);\r\n\r\n      const translatePromise = axios\r\n        .get(\r\n          `https://translate.googleapis.com/translate_a/single?client=gtx&sl=en&tl=vi&dt=t&q=${encodeURIComponent(\r\n            word\r\n          )}`\r\n        )\r\n        .catch(() => null);\r\n\r\n      const [dictRes, transRes] = await Promise.all([\r\n        dictPromise,\r\n        translatePromise,\r\n      ]);\r\n\r\n      let newData: Partial<VocabFormData> = { word: word };\r\n\r\n      if (dictRes && dictRes.data && dictRes.data[0]) {\r\n        const entry = dictRes.data[0];\r\n        if (entry.phonetic) newData.pronunciation = entry.phonetic;\r\n        else if (entry.phonetics && entry.phonetics.length > 0) {\r\n          const p = entry.phonetics.find((x: any) => x.text && x.audio);\r\n          newData.pronunciation = p ? p.text : entry.phonetics[0].text;\r\n        }\r\n        if (entry.meanings && entry.meanings.length > 0) {\r\n          const meaning = entry.meanings[0];\r\n          newData.partOfSpeech = meaning.partOfSpeech;\r\n          if (meaning.definitions) {\r\n            const defWithExample = meaning.definitions.find(\r\n              (d: any) => d.example\r\n            );\r\n            if (defWithExample) newData.example = defWithExample.example;\r\n          }\r\n        }\r\n      }\r\n\r\n      if (transRes && transRes.data && transRes.data[0]) {\r\n        const translatedText = transRes.data[0]\r\n          .map((item: any) => item[0])\r\n          .join(\"\");\r\n        newData.meaning = translatedText;\r\n      }\r\n      return newData;\r\n    } catch (error) {\r\n      console.error(\"Auto-fill error:\", error);\r\n      return null;\r\n    } finally {\r\n      setIsAutoFilling(false);\r\n    }\r\n  };\r\n\r\n  const handleOpenCreateModal = async (initialWord = \"\") => {\r\n    setSelectedVocab(null);\r\n    setIsModalOpen(true);\r\n    setFormData({\r\n      word: initialWord,\r\n      meaning: \"\",\r\n      example: \"\",\r\n      topic: \"\",\r\n      partOfSpeech: \"\",\r\n      relatedWords: \"\",\r\n      pronunciation: \"\",\r\n    });\r\n    if (initialWord) {\r\n      const autoData = await fetchAutoFillData(initialWord);\r\n      if (autoData) {\r\n        setFormData((prev) => ({ ...prev, ...autoData }));\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    if (!token || !formData.word) {\r\n      alert(\"Word is required!\");\r\n      return;\r\n    }\r\n    try {\r\n      if (selectedVocab) {\r\n        await api.patch(\r\n          `/vocabulary/${selectedVocab.id}`,\r\n          formData,\r\n          { headers: { Authorization: `Bearer ${token}` } }\r\n        );\r\n      } else {\r\n        await api.post(\r\n          \"/vocabulary\",\r\n          { ...formData, isStarred: false },\r\n          { headers: { Authorization: `Bearer ${token}` } }\r\n        );\r\n      }\r\n      setIsModalOpen(false);\r\n      fetchVocabs();\r\n    } catch (error) {\r\n      console.error(\"Save failed\", error);\r\n      alert(\"Failed to save.\");\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (id: string) => {\r\n    if (!confirm(\"Delete this word?\")) return;\r\n    try {\r\n      await api.delete(`/vocabulary/${id}`, {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n      fetchVocabs();\r\n      setIsModalOpen(false);\r\n    } catch (e) {\r\n      alert(\"Failed\");\r\n    }\r\n  };\r\n\r\n  const handleFileChange = async (\r\n    event: React.ChangeEvent<HTMLInputElement>\r\n  ) => {\r\n    const file = event.target.files?.[0];\r\n    if (!file || !token) return;\r\n    const formData = new FormData();\r\n    formData.append(\"file\", file);\r\n    try {\r\n      setIsUploading(true);\r\n      await api.post(\r\n        \"/vocabulary/import/csv\",\r\n        formData,\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n            \"Content-Type\": \"multipart/form-data\",\r\n          },\r\n        }\r\n      );\r\n      alert(\"Import success!\");\r\n      fetchVocabs(1);\r\n    } catch (error) {\r\n      alert(\"Import failed!\");\r\n    } finally {\r\n      setIsUploading(false);\r\n      if (fileInputRef.current) fileInputRef.current.value = \"\";\r\n    }\r\n  };\r\n\r\n  return {\r\n    selectedVocab,\r\n    isModalOpen,\r\n    setIsModalOpen,\r\n    isAutoFilling,\r\n    formData,\r\n    setFormData,\r\n    fileInputRef,\r\n    isUploading,\r\n    handleRowClick,\r\n    handleOpenCreateModal,\r\n    handleSave,\r\n    handleDelete,\r\n    handleFileChange,\r\n    fetchAutoFillData,\r\n  };\r\n};\r\n\r\nexport default useVocabModals;\r\n","\r\nimport { useState, useRef, useEffect } from \"react\";\r\nimport api from \"@/lib/api\"; // Import api for backend\r\nimport axios from \"axios\"; // Keep for Azure API\r\nimport { VocabItem } from \"./useVocabData\";\r\nimport { VocabFormData } from \"./useVocabModals\";\r\n\r\n// --- INTERFACES ---\r\nexport interface AssessmentResult {\r\n  AccuracyScore: number;\r\n  FluencyScore?: number;\r\n  CompletenessScore?: number;\r\n  PronScore?: number;\r\n  Words: Array<{\r\n    Word: string;\r\n    AccuracyScore: number;\r\n    ErrorType: string;\r\n    Phonemes: Array<{\r\n      Phoneme: string;\r\n      AccuracyScore: number;\r\n    }>;\r\n  }>;\r\n}\r\n\r\n// --- HELPERS ---\r\nasync function convertAudioToWav(audioBlob: Blob): Promise<Blob> {\r\n    const audioContext = new (window.AudioContext ||\r\n      (window as any).webkitAudioContext)({\r\n      sampleRate: 16000,\r\n    });\r\n    const arrayBuffer = await audioBlob.arrayBuffer();\r\n    const audioBuffer = await audioContext.decodeAudioData(arrayBuffer);\r\n    const pcmData = audioBuffer.getChannelData(0);\r\n    const wavBuffer = encodeWAV(pcmData, 16000);\r\n    return new Blob([wavBuffer], { type: \"audio/wav\" });\r\n  }\r\n  \r\nfunction encodeWAV(samples: Float32Array, sampleRate: number) {\r\n    const buffer = new ArrayBuffer(44 + samples.length * 2);\r\n    const view = new DataView(buffer);\r\n    const writeString = (view: DataView, offset: number, string: string) => {\r\n      for (let i = 0; i < string.length; i++) {\r\n        view.setUint8(offset + i, string.charCodeAt(i));\r\n      }\r\n    };\r\n    writeString(view, 0, \"RIFF\");\r\n    view.setUint32(4, 36 + samples.length * 2, true);\r\n    writeString(view, 8, \"WAVE\");\r\n    writeString(view, 12, \"fmt \");\r\n    view.setUint32(16, 16, true);\r\n    view.setUint16(20, 1, true);\r\n    view.setUint16(22, 1, true);\r\n    view.setUint32(24, sampleRate, true);\r\n    view.setUint32(28, sampleRate * 2, true);\r\n    view.setUint16(32, 2, true);\r\n    view.setUint16(34, 16, true);\r\n    writeString(view, 36, \"data\");\r\n    view.setUint32(40, samples.length * 2, true);\r\n    let offset = 44;\r\n    for (let i = 0; i < samples.length; i++, offset += 2) {\r\n      let s = Math.max(-1, Math.min(1, samples[i]));\r\n      view.setInt16(offset, s < 0 ? s * 0x8000 : s * 0x7fff, true);\r\n    }\r\n    return view;\r\n}\r\n\r\n\r\nconst usePronunciationAssessment = (\r\n  token: string | null,\r\n  fetchVocabs: (page?: number) => void,\r\n  page: number\r\n) => {\r\n  const [isAssessmentModalOpen, setIsAssessmentModalOpen] = useState(false);\r\n  const [recordingVocabItem, setRecordingVocabItem] =\r\n    useState<VocabItem | null>(null);\r\n  const [isRecording, setIsRecording] = useState(false);\r\n  const [assessmentResult, setAssessmentResult] =\r\n    useState<AssessmentResult | null>(null);\r\n  const [assessmentError, setAssessmentError] = useState<string>(\"\");\r\n  const [isProcessingAudio, setIsProcessingAudio] = useState(false);\r\n  const mediaRecorderRef = useRef<MediaRecorder | null>(null);\r\n  const audioChunksRef = useRef<Blob[]>([]);\r\n  const [userAudioUrl, setUserAudioUrl] = useState<string | null>(null);\r\n\r\n  const handleOpenAssessment = (\r\n    item: VocabItem | VocabFormData,\r\n    e?: React.MouseEvent\r\n  ) => {\r\n    if (e) e.stopPropagation();\r\n    const vocabItem =\r\n      \"id\" in item\r\n        ? item\r\n        : ({\r\n            ...item,\r\n            id: \"temp\",\r\n            occurrence: 0,\r\n            isStarred: false,\r\n            pronunciationScores: [],\r\n            createdAt: \"\",\r\n            updatedAt: \"\",\r\n          } as VocabItem);\r\n\r\n    setRecordingVocabItem(vocabItem);\r\n    setAssessmentResult(null);\r\n    setAssessmentError(\"\");\r\n    setUserAudioUrl(null);\r\n    setIsAssessmentModalOpen(true);\r\n  };\r\n\r\n  const startRecording = async () => {\r\n    try {\r\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\r\n      const mediaRecorder = new MediaRecorder(stream);\r\n      mediaRecorderRef.current = mediaRecorder;\r\n      audioChunksRef.current = [];\r\n      mediaRecorder.ondataavailable = (event) => {\r\n        if (event.data.size > 0) audioChunksRef.current.push(event.data);\r\n      };\r\n      mediaRecorder.onstop = async () => {\r\n        const audioBlob = new Blob(audioChunksRef.current, {\r\n          type: \"audio/webm\",\r\n        });\r\n        const audioUrl = URL.createObjectURL(audioBlob);\r\n        setUserAudioUrl(audioUrl);\r\n        await processAudio(audioBlob);\r\n        stream.getTracks().forEach((track) => track.stop());\r\n      };\r\n      mediaRecorder.start();\r\n      setIsRecording(true);\r\n      setAssessmentError(\"\");\r\n    } catch (err) {\r\n      setAssessmentError(\"Microphone access denied.\");\r\n    }\r\n  };\r\n\r\n  const stopRecording = () => {\r\n    if (mediaRecorderRef.current && isRecording) {\r\n      mediaRecorderRef.current.stop();\r\n      setIsRecording(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    let timer: NodeJS.Timeout;\r\n    if (isAssessmentModalOpen) {\r\n      timer = setTimeout(() => {\r\n        if (!isRecording) {\r\n          startRecording();\r\n        }\r\n      }, 300);\r\n    } else {\r\n      stopRecording();\r\n    }\r\n    return () => clearTimeout(timer);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [isAssessmentModalOpen]);\r\n\r\n  const processAudio = async (audioBlob: Blob) => {\r\n    if (!recordingVocabItem) return;\r\n    setIsProcessingAudio(true);\r\n    try {\r\n      const azureKey = localStorage.getItem(\"azureKey\");\r\n      const azureRegion = localStorage.getItem(\"azureRegion\");\r\n      if (!azureKey || !azureRegion) throw new Error(\"Missing Azure Keys.\");\r\n      const wavBlob = await convertAudioToWav(audioBlob);\r\n      const assessParams = {\r\n        ReferenceText: recordingVocabItem.word,\r\n        GradingSystem: \"HundredMark\",\r\n        Granularity: \"Phoneme\",\r\n        Dimension: \"Comprehensive\",\r\n        PhonemeAlphabet: \"IPA\",\r\n      };\r\n      const paramsHeader = btoa(JSON.stringify(assessParams));\r\n      const url = `https://${azureRegion}.stt.speech.microsoft.com/speech/recognition/conversation/cognitiveservices/v1?language=en-US`;\r\n      const response = await axios.post(url, wavBlob, {\r\n        headers: {\r\n          \"Ocp-Apim-Subscription-Key\": azureKey,\r\n          \"Content-Type\": \"audio/wav; codecs=audio/pcm; samplerate=16000\",\r\n          Accept: \"application/json\",\r\n          \"Pronunciation-Assessment\": paramsHeader,\r\n        },\r\n      });\r\n      const data = response.data;\r\n      if (data.NBest && data.NBest[0]) {\r\n        const result = data.NBest[0];\r\n        const score =\r\n          result.PronunciationAssessment?.AccuracyScore || result.AccuracyScore;\r\n        setAssessmentResult({ AccuracyScore: score, Words: result.Words });\r\n\r\n        if (recordingVocabItem.id !== \"temp\") {\r\n          await api.patch(\r\n            `/vocabulary/${recordingVocabItem.id}/score`,\r\n            { score: Math.round(score) },\r\n            { headers: { Authorization: `Bearer ${token}` } }\r\n          );\r\n          fetchVocabs(page);\r\n        }\r\n      } else {\r\n        setAssessmentError(\"Could not recognize speech.\");\r\n      }\r\n    } catch (err: any) {\r\n      setAssessmentError(err.message);\r\n    } finally {\r\n      setIsProcessingAudio(false);\r\n    }\r\n  };\r\n\r\n // apps/frontend/hooks/vocabulary/usePronunciationAssessment.ts\r\n\r\n  const handleSpeak = (text: string, e?: React.MouseEvent) => {\r\n    if (e) e.stopPropagation();\r\n    if (!text) return;\r\n    window.speechSynthesis.cancel();\r\n\r\n    const utterance = new SpeechSynthesisUtterance(text);\r\n    utterance.lang = \"en-US\";\r\n    utterance.rate = 0.9; // T·ªëc ƒë·ªô ƒë·ªçc (0.9 l√† v·ª´a ph·∫£i)\r\n\r\n    // üëá LOGIC M·ªöI: ∆Øu ti√™n tuy·ªát ƒë·ªëi cho Microsoft Aria Online\r\n    const getVoice = () => {\r\n      const voices = window.speechSynthesis.getVoices();\r\n      \r\n      // 1. T√¨m ch√≠nh x√°c gi·ªçng Microsoft Aria Online (∆Øu ti√™n s·ªë 1)\r\n      const ariaOnline = voices.find(v => v.name.includes(\"Microsoft Aria Online\"));\r\n      if (ariaOnline) return ariaOnline;\r\n\r\n      // 2. N·∫øu kh√¥ng c√≥ Online, t√¨m gi·ªçng Aria b·∫•t k·ª≥ (∆Øu ti√™n s·ªë 2)\r\n      const ariaAny = voices.find(v => v.name.includes(\"Aria\"));\r\n      if (ariaAny) return ariaAny;\r\n\r\n      // 3. Fallback: T√¨m gi·ªçng US English t·ª± nhi√™n (Google US English, etc.)\r\n      return voices.find(v => v.lang === \"en-US\" && !v.name.includes(\"Zira\")); \r\n    };\r\n\r\n    const preferredVoice = getVoice();\r\n\r\n    if (preferredVoice) {\r\n      utterance.voice = preferredVoice;\r\n      // console.log(\"Using voice:\", preferredVoice.name); // B·∫≠t d√≤ng n√†y ƒë·ªÉ debug xem n√≥ ƒëang d√πng gi·ªçng n√†o\r\n    }\r\n\r\n    window.speechSynthesis.speak(utterance);\r\n  };\r\n\r\n  return {\r\n    isAssessmentModalOpen,\r\n    setIsAssessmentModalOpen,\r\n    recordingVocabItem,\r\n    isRecording,\r\n    assessmentResult,\r\n    assessmentError,\r\n    isProcessingAudio,\r\n    userAudioUrl,\r\n    startRecording,\r\n    stopRecording,\r\n    handleOpenAssessment,\r\n    handleSpeak,\r\n  };\r\n};\r\n\r\nexport default usePronunciationAssessment;\r\n","import { useState, useRef, useEffect } from \"react\";\r\nimport api from \"@/lib/api\"; // Import api\r\nimport { useSearchParams, usePathname } from \"next/navigation\";\r\nimport { VocabItem } from \"./useVocabData\";\r\n\r\nconst useQuickSearch = (\r\n  token: string | null,\r\n  handleOpenCreateModal: (word: string) => void\r\n) => {\r\n  const [showSearch, setShowSearch] = useState(false);\r\n  const [quickSearchText, setQuickSearchText] = useState(\"\");\r\n  const [quickSearchResults, setQuickSearchResults] = useState<VocabItem[]>([]);\r\n  const [isSearching, setIsSearching] = useState(false);\r\n  const searchInputRef = useRef<HTMLInputElement>(null);\r\n  const quickSearchDebounce = useRef<NodeJS.Timeout | null>(null);\r\n\r\n  const searchParams = useSearchParams();\r\n  const pathname = usePathname();\r\n\r\n  useEffect(() => {\r\n    const isSearchPath = pathname?.endsWith(\"/search\");\r\n    const hasSearchParam = searchParams.get(\"openSearch\") === \"true\";\r\n\r\n    if (isSearchPath || hasSearchParam) {\r\n      setShowSearch(true);\r\n      setQuickSearchText(\"\");\r\n      setTimeout(() => {\r\n        if (searchInputRef.current) {\r\n          searchInputRef.current.focus();\r\n        }\r\n      }, 100);\r\n    }\r\n  }, [pathname, searchParams]);\r\n\r\n  useEffect(() => {\r\n    let lastKeyPressTime = 0;\r\n    const handleKeyDown = (e: KeyboardEvent) => {\r\n        const target = e.target as HTMLElement;\r\n        const isInputFocused = target.tagName === 'INPUT' || target.tagName === 'TEXTAREA' || target.isContentEditable;\r\n\r\n        if (isInputFocused && !showSearch) return;\r\n\r\n\r\n      if (e.code === \"Space\") {\r\n        const currentTime = new Date().getTime();\r\n        if (currentTime - lastKeyPressTime < 300) {\r\n          e.preventDefault();\r\n          setShowSearch(true);\r\n          setQuickSearchText(\"\");\r\n          setQuickSearchResults([]);\r\n          setTimeout(() => searchInputRef.current?.focus(), 100);\r\n        }\r\n        lastKeyPressTime = currentTime;\r\n      }\r\n      if (e.code === \"Escape\") {\r\n        setShowSearch(false);\r\n      }\r\n    };\r\n    window.addEventListener(\"keydown\", handleKeyDown);\r\n    return () => window.removeEventListener(\"keydown\", handleKeyDown);\r\n  }, [showSearch]);\r\n\r\n  const handleQuickSearchChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const text = e.target.value;\r\n    setQuickSearchText(text);\r\n    if (quickSearchDebounce.current) clearTimeout(quickSearchDebounce.current);\r\n    quickSearchDebounce.current = setTimeout(\r\n      () => performQuickSearch(text),\r\n      300\r\n    );\r\n  };\r\n\r\n  const performQuickSearch = async (text: string) => {\r\n    if (!token || !text.trim()) {\r\n      setQuickSearchResults([]);\r\n      return;\r\n    }\r\n    setIsSearching(true);\r\n    try {\r\n      const res = await api.get(\"/vocabulary\", {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n        params: {\r\n          page: 1,\r\n          limit: 5,\r\n          search: text,\r\n          sortBy: \"word\",\r\n          sortOrder: \"asc\",\r\n        },\r\n      });\r\n      setQuickSearchResults(res.data.data);\r\n    } catch (error) {\r\n      console.error(\"Quick search error\", error);\r\n    } finally {\r\n      setIsSearching(false);\r\n    }\r\n  };\r\n\r\n  const hasExactMatch = quickSearchResults.some(\r\n    (item) => item.word.toLowerCase() === quickSearchText.trim().toLowerCase()\r\n  );\r\n\r\n  return {\r\n    showSearch,\r\n    setShowSearch,\r\n    quickSearchText,\r\n    setQuickSearchText,\r\n    quickSearchResults,\r\n    isSearching,\r\n    searchInputRef,\r\n    hasExactMatch,\r\n    handleQuickSearchChange,\r\n  };\r\n};\r\n\r\nexport default useQuickSearch;","import React from \"react\";\r\n\r\nexport const StarIcon = ({ filled, className }: { filled: boolean; className?: string }) => (\r\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill={filled ? \"currentColor\" : \"none\"} stroke=\"currentColor\" strokeWidth={filled ? \"0\" : \"2\"} strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className} width=\"24\" height=\"24\">\r\n    <path d=\"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z\" />\r\n  </svg>\r\n);\r\n\r\nexport const SpeakerIcon = ({ className }: { className?: string }) => (\r\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}>\r\n    <polygon points=\"11 5 6 9 2 9 2 15 6 15 11 19 11 5\"></polygon>\r\n    <path d=\"M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07\"></path>\r\n  </svg>\r\n);\r\n\r\nexport const MicrophoneIcon = ({ className }: { className?: string }) => (\r\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}>\r\n    <path d=\"M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z\"></path>\r\n    <path d=\"M19 10v2a7 7 0 0 1-14 0v-2\"></path>\r\n    <line x1=\"12\" y1=\"19\" x2=\"12\" y2=\"23\"></line>\r\n    <line x1=\"8\" y1=\"23\" x2=\"16\" y2=\"23\"></line>\r\n  </svg>\r\n);","\nimport React from \"react\";\nimport {\n  VocabItem,\n  FilterState,\n  SortState,\n} from \"@/hooks/vocabulary/useVocabData\";\nimport { StarIcon, MicrophoneIcon, SpeakerIcon } from \"@/components/Icons\";\n\ninterface Props {\n  vocabs: VocabItem[];\n  loading: boolean;\n  page: number;\n  totalPages: number;\n  setPage: (page: number) => void;\n  fetchVocabs: (\n    pageNum?: number,\n    filters?: FilterState,\n    sort?: SortState\n  ) => void;\n  filters: FilterState;\n  handleFilterChange: (key: keyof FilterState, value: string) => void;\n  handleSort: (key: string) => void;\n  sortConfig: SortState;\n  columnOrder: string[];\n  handleDragStart: (e: React.DragEvent, col: string) => void;\n  handleDragOver: (e: React.DragEvent, col: string) => void;\n  handleDragEnd: () => void;\n  draggedCol: string | null;\n  handleRowClick: (item: VocabItem) => void;\n  handleToggleStar: (id: string, status: boolean, e: React.MouseEvent) => void;\n  handleSpeak: (text: string, e: React.MouseEvent) => void;\n  handleOpenAssessment: (item: VocabItem, e: React.MouseEvent) => void;\n  triggerInteraction: (vocab: VocabItem) => void;\n}\n\nexport default function VocabTable({\n  vocabs,\n  loading,\n  page,\n  totalPages,\n  setPage,\n  fetchVocabs,\n  filters,\n  handleFilterChange,\n  handleSort,\n  sortConfig,\n  columnOrder,\n  handleDragStart,\n  handleDragOver,\n  handleDragEnd,\n  draggedCol,\n  handleRowClick,\n  handleToggleStar,\n  handleSpeak,\n  handleOpenAssessment,\n  triggerInteraction,\n}: Props) {\n  const handlePageChange = (newPage: number) => {\n    setPage(newPage);\n    fetchVocabs(newPage, filters, sortConfig);\n  };\n\n  const getSortIcon = (colKey: string) =>\n    sortConfig.key !== colKey ? (\n      <span className=\"text-gray-300 ml-1 opacity-50\">‚Üï</span>\n    ) : sortConfig.direction === \"asc\" ? (\n      <span className=\"ml-1 text-indigo-600\">‚ñ≤</span>\n    ) : (\n      <span className=\"ml-1 text-indigo-600\">‚ñº</span>\n    );\n\n  const columnConfig: Record<\n    string,\n    {\n      label: React.ReactNode;\n      width: string;\n      renderCell: (v: VocabItem) => React.ReactNode;\n      renderFilter?: () => React.ReactNode;\n      sortKey?: string;\n    }\n  > = {\n    star: {\n      label: \"‚òÖ\",\n      width: \"w-12\",\n      sortKey: \"isStarred\",\n      renderCell: (v) => (\n        <button\n          onClick={(e) => handleToggleStar(v.id, v.isStarred, e)}\n          className=\"hover:bg-gray-100 rounded-full p-1\"\n        >\n          <StarIcon\n            filled={v.isStarred}\n            className={\n              v.isStarred ? \"text-yellow-400 w-5 h-5\" : \"text-gray-300 w-5 h-5\"\n            }\n          />\n        </button>\n      ),\n    },\n    updatedAt: {\n      label: \"Last Active\",\n      width: \"w-32\",\n      sortKey: \"updatedAt\",\n      renderCell: (v) => (\n        <div className=\"font-mono text-xs text-gray-500\">\n          {new Date(v.updatedAt).toLocaleDateString()} <br />\n          <span className=\"text-gray-400\">\n            {new Date(v.updatedAt).toLocaleTimeString()}\n          </span>\n        </div>\n      ),\n    },\n    topic: {\n      label: \"Topic\",\n      width: \"w-32\",\n      sortKey: \"topic\",\n      renderCell: (v) =>\n        v.topic && (\n          <span className=\"bg-gray-100 px-2 py-0.5 rounded text-xs\">\n            {v.topic}\n          </span>\n        ),\n      renderFilter: () => (\n        <input\n          className=\"w-full border rounded px-2 py-1 text-xs outline-none focus:border-indigo-500\"\n          placeholder=\"Filter...\"\n          value={filters.topic}\n          onChange={(e) => handleFilterChange(\"topic\", e.target.value)}\n        />\n      ),\n    },\n    word: {\n      label: \"Word\",\n      width: \"w-48\",\n      sortKey: \"word\",\n      renderCell: (v) => (\n        <div className=\"flex items-center justify-between gap-2 font-bold text-indigo-700\">\n          <span>{v.word}</span>\n          <div className=\"flex items-center gap-1\">\n            <button\n              onClick={(e) => {\n                handleOpenAssessment(v, e);\n                triggerInteraction(v);\n              }}\n              className=\"text-gray-400 hover:text-green-600 p-1 rounded-full hover:bg-green-50\"\n              title=\"Practice Pronunciation\"\n            >\n              <MicrophoneIcon className=\"w-4 h-4\" />\n            </button>\n            <button\n              onClick={(e) => {\n                handleSpeak(v.word, e);\n                triggerInteraction(v);\n              }}\n              className=\"text-gray-400 hover:text-indigo-600 p-1 rounded-full hover:bg-indigo-50\"\n            >\n              <SpeakerIcon className=\"w-4 h-4\" />\n            </button>\n          </div>\n        </div>\n      ),\n      renderFilter: () => (\n        <input\n          className=\"w-full border rounded px-2 py-1 text-xs outline-none focus:border-indigo-500\"\n          placeholder=\"Filter...\"\n          value={filters.word}\n          onChange={(e) => handleFilterChange(\"word\", e.target.value)}\n        />\n      ),\n    },\n    pronunciation: {\n      label: \"Pronun.\",\n      width: \"w-32\",\n      renderCell: (v) => (\n        <span className=\"font-mono text-gray-500 text-xs\">\n          {v.pronunciation}\n        </span>\n      ),\n    },\n    meaning: {\n      label: \"Meaning\",\n      width: \"w-48\",\n      renderCell: (v) => (\n        <span\n          className=\"text-gray-800 text-sm line-clamp-2\"\n          title={v.meaning || \"\"}\n        >\n          {v.meaning}\n        </span>\n      ),\n      renderFilter: () => (\n        <input\n          className=\"w-full border rounded px-2 py-1 text-xs outline-none focus:border-indigo-500\"\n          placeholder=\"Meaning...\"\n          value={filters.meaning}\n          onChange={(e) => handleFilterChange(\"meaning\", e.target.value)}\n        />\n      ),\n    },\n    example: {\n      label: \"Example\",\n      width: \"w-64\",\n      renderCell: (v) => (\n        <span\n          className=\"italic text-gray-500 text-xs line-clamp-2\"\n          title={v.example || \"\"}\n        >\n          {v.example}\n        </span>\n      ),\n    },\n    relatedWords: {\n      label: \"Related\",\n      width: \"w-40\",\n      renderCell: (v) => (\n        <span className=\"text-gray-500 text-xs\">{v.relatedWords}</span>\n      ),\n    },\n    occurrence: {\n      label: \"Count\",\n      width: \"w-20\",\n      sortKey: \"occurrence\",\n      renderCell: (v) => (\n        <div className=\"text-center font-semibold text-gray-500\">\n          {v.occurrence}\n        </div>\n      ),\n    },\n    score: {\n      label: \"Score\",\n      width: \"w-20\",\n      renderCell: (v) => {\n        const scores = v.pronunciationScores || [];\n        if (scores.length === 0)\n          return <span className=\"text-gray-300 text-xs\">-</span>;\n        const recentScores = scores.slice(-3);\n        const avg = Math.round(\n          recentScores.reduce((a, b) => a + b, 0) / recentScores.length\n        );\n        let colorClass = \"bg-red-100 text-red-700\";\n        if (avg >= 80) colorClass = \"bg-green-100 text-green-700\";\n        else if (avg >= 60) colorClass = \"bg-yellow-100 text-yellow-700\";\n        return (\n          <div className=\"flex flex-col items-center\">\n            <span\n              className={`text-xs font-bold px-2 py-0.5 rounded ${colorClass}`}\n            >\n              {avg}\n            </span>\n          </div>\n        );\n      },\n    },\n    actions: {\n      label: \"Action\",\n      width: \"w-20\",\n      renderCell: (v) => (\n        <button\n          onClick={(e) => {\n            e.stopPropagation();\n            handleRowClick(v);\n          }}\n          className=\"text-indigo-600 text-xs border border-indigo-200 px-2 py-1 rounded hover:bg-indigo-50\"\n        >\n          Edit\n        </button>\n      ),\n    },\n  };\n\n  return (\n    <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden flex flex-col\">\n      <div className=\"overflow-x-auto pb-4\">\n        <table className=\"min-w-full divide-y divide-gray-200 table-fixed\">\n          <thead className=\"bg-gray-50 select-none\">\n            <tr>\n              {columnOrder.map((colId) => {\n                const config = columnConfig[colId];\n                if (!config) return null;\n                const isDragging = draggedCol === colId;\n                return (\n                  <th\n                    key={colId}\n                    draggable\n                    onDragStart={(e) => handleDragStart(e, colId)}\n                    onDragOver={(e) => handleDragOver(e, colId)}\n                    onDragEnd={handleDragEnd}\n                    onClick={() => config.sortKey && handleSort(config.sortKey)}\n                    className={`${\n                      config.width\n                    } px-4 py-3 text-left text-xs font-bold text-gray-500 uppercase border-r border-gray-200 cursor-move hover:bg-gray-100 transition-all duration-200 ${\n                      isDragging\n                        ? \"opacity-50 bg-indigo-50 border-2 border-indigo-300 scale-95 shadow-inner\"\n                        : \"\"\n                    } ${\n                      colId === \"actions\"\n                        ? \"sticky right-0 bg-gray-50 shadow-l z-10\"\n                        : \"\"\n                    }`}\n                  >\n                    <div className=\"flex items-center justify-between pointer-events-none\">\n                      <span>{config.label}</span>\n                      {config.sortKey && getSortIcon(config.sortKey)}\n                    </div>\n                  </th>\n                );\n              })}\n            </tr>\n            <tr className=\"bg-white border-b border-gray-200\">\n              {columnOrder.map((colId) => {\n                const config = columnConfig[colId];\n                if (!config) return null;\n                return (\n                  <td\n                    key={colId}\n                    className={`p-2 border-r border-gray-100 ${\n                      colId === \"actions\"\n                        ? \"sticky right-0 bg-white z-10\"\n                        : \"\"\n                    }`}\n                  >\n                    {config.renderFilter ? config.renderFilter() : null}\n                  </td>\n                );\n              })}\n            </tr>\n          </thead>\n          <tbody className=\"bg-white divide-y divide-gray-200\">\n            {loading ? (\n              <tr>\n                <td\n                  colSpan={columnOrder.length}\n                  className=\"text-center py-10 text-gray-500\"\n                >\n                  Loading data...\n                </td>\n              </tr>\n            ) : vocabs.length === 0 ? (\n              <tr>\n                <td\n                  colSpan={columnOrder.length}\n                  className=\"text-center py-10 text-gray-500\"\n                >\n                  No vocabulary found.\n                </td>\n              </tr>\n            ) : (\n              vocabs.map((vocab) => (\n                <tr\n                  key={vocab.id}\n                  className=\"hover:bg-indigo-50/50 group transition-colors cursor-pointer\"\n                  onClick={() => handleRowClick(vocab)}\n                >\n                  {columnOrder.map((colId) => {\n                    const config = columnConfig[colId];\n                    if (!config) return null;\n                    return (\n                      <td\n                        key={colId}\n                        className={`px-4 py-3 text-sm border-r border-gray-100 align-top whitespace-normal break-words ${\n                          colId === \"actions\"\n                            ? \"sticky right-0 bg-white group-hover:bg-indigo-50/50 shadow-l z-10\"\n                            : \"\"\n                        }`}\n                        onClick={\n                          colId === \"actions\" || colId === \"star\"\n                            ? (e) => e.stopPropagation()\n                            : undefined\n                        }\n                      >\n                        {config.renderCell(vocab)}\n                      </td>\n                    );\n                  })}\n                </tr>\n              ))\n            )}\n          </tbody>\n        </table>\n      </div>\n      <div className=\"p-4 border-t border-gray-200 bg-gray-50 flex justify-between items-center sticky bottom-0 z-20\">\n        <button\n          disabled={page <= 1}\n          onClick={() => handlePageChange(page - 1)}\n          className=\"px-4 py-2 bg-white border rounded shadow-sm hover:bg-gray-100 disabled:opacity-50 text-sm font-medium\"\n        >\n          ‚Üê Previous\n        </button>\n        <span className=\"text-sm font-medium text-gray-600\">\n          Page <span className=\"text-indigo-600 font-bold\">{page}</span> of{\" \"}\n          {totalPages}\n        </span>\n        <button\n          disabled={page >= totalPages}\n          onClick={() => handlePageChange(page + 1)}\n          className=\"px-4 py-2 bg-white border rounded shadow-sm hover:bg-gray-100 disabled:opacity-50 text-sm font-medium\"\n        >\n          Next ‚Üí\n        </button>\n      </div>\n    </div>\n  );\n}\n","\nimport React from \"react\";\nimport { MicrophoneIcon, SpeakerIcon } from \"@/components/Icons\";\nimport { VocabFormData } from \"@/hooks/vocabulary/useVocabModals\";\nimport { VocabItem } from \"@/hooks/vocabulary/useVocabData\";\n\ninterface Props {\n  isOpen: boolean;\n  onClose: () => void;\n  initialData: VocabFormData;\n  setInitialData: (data: VocabFormData) => void;\n  isEditMode: boolean;\n  onSave: () => void;\n  onDelete: (() => void) | undefined;\n  isAutoFilling: boolean;\n  fetchAutoFillData: (word: string) => Promise<Partial<VocabFormData> | null>;\n  handleOpenAssessment: (item: VocabFormData, e?: React.MouseEvent) => void;\n  handleSpeak: (text: string, e?: React.MouseEvent) => void;\n  selectedVocab: VocabItem | null;\n}\n\nexport default function VocabFormModal({\n  isOpen,\n  onClose,\n  initialData: formData,\n  setInitialData: setFormData,\n  isEditMode,\n  onSave,\n  onDelete,\n  isAutoFilling,\n  fetchAutoFillData,\n  handleOpenAssessment,\n  handleSpeak,\n  selectedVocab,\n}: Props) {\n  if (!isOpen) return null;\n\n  const handleAutoFill = async () => {\n    if (!isEditMode) {\n      const autoData = await fetchAutoFillData(formData.word);\n      if (autoData) {\n        setFormData({ ...formData, ...autoData });\n      }\n    }\n  };\n\n  return (\n    <div\n      className=\"fixed inset-0 bg-black/60 z-[150] flex items-center justify-center p-4 backdrop-blur-sm\"\n      onClick={onClose}\n    >\n      <div\n        className=\"bg-white w-full max-w-2xl rounded-xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]\"\n        onClick={(e) => e.stopPropagation()}\n      >\n        <div className=\"bg-indigo-600 p-6 text-white flex justify-between items-start shrink-0\">\n          <div className=\"w-full\">\n            <div className=\"text-xs uppercase tracking-wider opacity-80 mb-2\">\n              {isEditMode ? \"Editing Vocabulary\" : \"Create New Vocabulary\"}\n            </div>\n            <div className=\"flex items-center gap-3 w-full\">\n              <input\n                value={formData.word || \"\"}\n                onChange={(e) =>\n                  setFormData({ ...formData, word: e.target.value })\n                }\n                onBlur={handleAutoFill}\n                className=\"bg-transparent text-4xl font-bold text-white placeholder-white/50 outline-none w-full border-b border-white/20 pb-1 focus:border-white transition-colors\"\n                placeholder=\"Word...\"\n                autoFocus={!isEditMode}\n              />\n\n              {isAutoFilling && (\n                <div className=\"text-xs text-indigo-200 animate-pulse ml-2 whitespace-nowrap\">\n                  ‚ú® Auto-filling...\n                </div>\n              )}\n\n              {formData.word && (\n                <>\n                  <button\n                    onClick={(e) => handleOpenAssessment(formData, e)}\n                    className=\"p-2 bg-white/20 rounded-full hover:bg-green-500 text-white transition-colors\"\n                  >\n                    <MicrophoneIcon className=\"w-6 h-6\" />\n                  </button>\n                  <button\n                    onClick={(e) => handleSpeak(formData.word, e)}\n                    className=\"p-2 bg-white/20 rounded-full hover:bg-white/30 text-white\"\n                  >\n                    <SpeakerIcon className=\"w-6 h-6\" />\n                  </button>\n                </>\n              )}\n            </div>\n          </div>\n          <button\n            onClick={onClose}\n            className=\"text-white/70 hover:text-white text-2xl font-bold ml-4\"\n          >\n            ‚úï\n          </button>\n        </div>\n        <div className=\"p-6 space-y-5 overflow-y-auto relative\">\n          {isAutoFilling && (\n            <div className=\"absolute inset-0 bg-white/50 z-10 flex items-center justify-center\">\n              <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600\"></div>\n            </div>\n          )}\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-xs font-bold text-gray-400 uppercase mb-1\">\n                Pronunciation\n              </label>\n              <input\n                value={formData.pronunciation || \"\"}\n                onChange={(e) =>\n                  setFormData({\n                    ...formData,\n                    pronunciation: e.target.value,\n                  })\n                }\n                className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none font-mono text-sm\"\n                placeholder=\"/.../\"\n              />\n            </div>\n            <div>\n              <label className=\"block text-xs font-bold text-gray-400 uppercase mb-1\">\n                Part Of Speech\n              </label>\n              <select\n                value={formData.partOfSpeech || \"\"}\n                onChange={(e) =>\n                  setFormData({ ...formData, partOfSpeech: e.target.value })\n                }\n                className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none bg-white\"\n              >\n                <option value=\"\">-- Select --</option>\n                <option value=\"noun\">Noun</option>\n                <option value=\"verb\">Verb</option>\n                <option value=\"adjective\">Adjective</option>\n                <option value=\"adverb\">Adverb</option>\n                <option value=\"phrase\">Phrase</option>\n              </select>\n            </div>\n          </div>\n          <div>\n            <label className=\"block text-xs font-bold text-gray-400 uppercase mb-1\">\n              Meaning\n            </label>\n            <textarea\n              value={formData.meaning || \"\"}\n              onChange={(e) =>\n                setFormData({ ...formData, meaning: e.target.value })\n              }\n              className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none min-h-[80px] text-lg font-medium text-gray-800\"\n              placeholder=\"Nghƒ©a c·ªßa t·ª´...\"\n            />\n          </div>\n          <div>\n            <label className=\"block text-xs font-bold text-gray-400 uppercase mb-1\">\n              Example\n            </label>\n            <textarea\n              value={formData.example || \"\"}\n              onChange={(e) =>\n                setFormData({ ...formData, example: e.target.value })\n              }\n              className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none bg-gray-50 italic text-gray-600\"\n              placeholder=\"V√≠ d·ª•...\"\n            />\n          </div>\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-xs font-bold text-gray-400 uppercase mb-1\">\n                Topic\n              </label>\n              <input\n                value={formData.topic || \"\"}\n                onChange={(e) =>\n                  setFormData({ ...formData, topic: e.target.value })\n                }\n                className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none\"\n                placeholder=\"IT, Travel...\"\n              />\n            </div>\n            <div>\n              <label className=\"block text-xs font-bold text-gray-400 uppercase mb-1\">\n                Related Words\n              </label>\n              <input\n                value={formData.relatedWords || \"\"}\n                onChange={(e) =>\n                  setFormData({ ...formData, relatedWords: e.target.value })\n                }\n                className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none\"\n                placeholder=\"Synonyms...\"\n              />\n            </div>\n          </div>\n        </div>\n        <div className=\"bg-gray-50 p-4 border-t border-gray-200 flex justify-between items-center shrink-0\">\n          {selectedVocab ? (\n            <div className=\"text-xs text-gray-400\">\n              Updated: {new Date(selectedVocab.updatedAt).toLocaleString()}\n            </div>\n          ) : (\n            <div></div>\n          )}\n          <div className=\"flex gap-3\">\n            {isEditMode && onDelete && (\n              <button\n                onClick={onDelete}\n                className=\"text-red-600 hover:bg-red-50 px-4 py-2 rounded-lg text-sm font-medium transition-colors border border-transparent hover:border-red-200\"\n              >\n                Delete\n              </button>\n            )}\n            <button\n              onClick={onClose}\n              className=\"text-gray-600 hover:bg-gray-200 px-5 py-2 rounded-lg text-sm font-medium transition-colors\"\n            >\n              Cancel\n            </button>\n            <button\n              onClick={onSave}\n              className=\"bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-2 rounded-lg text-sm font-bold shadow-md transform active:scale-95 transition-all\"\n            >\n              {isEditMode ? \"Save Changes\" : \"Create Word\"}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { MicrophoneIcon, SpeakerIcon } from \"@/components/Icons\";\nimport { AssessmentResult } from \"@/hooks/vocabulary/usePronunciationAssessment\";\nimport { VocabItem } from \"@/hooks/vocabulary/useVocabData\";\n\ninterface Props {\n  isOpen: boolean;\n  onClose: () => void;\n  vocabItem: VocabItem | null;\n  isRecording: boolean;\n  assessmentResult: AssessmentResult | null;\n  assessmentError: string;\n  isProcessingAudio: boolean;\n  userAudioUrl: string | null;\n  startRecording: () => void;\n  stopRecording: () => void;\n  handleSpeak: (text: string, e?: React.MouseEvent) => void;\n}\n\nexport default function AssessmentModal({\n  isOpen,\n  onClose,\n  vocabItem,\n  isRecording,\n  assessmentResult,\n  assessmentError,\n  isProcessingAudio,\n  userAudioUrl,\n  startRecording,\n  stopRecording,\n  handleSpeak,\n}: Props) {\n  if (!isOpen || !vocabItem) return null;\n\n  return (\n    <div\n      className=\"fixed inset-0 bg-black/80 z-[2147483649] flex items-center justify-center p-4 backdrop-blur-sm\"\n      onClick={onClose}\n    >\n      <div\n        className=\"bg-white w-full max-w-md rounded-2xl shadow-2xl overflow-hidden flex flex-col items-center p-8 relative animate-in fade-in zoom-in duration-200\"\n        onClick={(e) => e.stopPropagation()}\n      >\n        <button\n          onClick={onClose}\n          className=\"absolute top-4 right-4 text-gray-400 hover:text-gray-600\"\n        >\n          ‚úï\n        </button>\n        <h3 className=\"text-3xl font-bold text-gray-800 mb-1\">\n          {vocabItem.word}\n        </h3>\n        <div className=\"flex flex-col items-center gap-1 mb-6\">\n          {vocabItem.pronunciation && (\n            <span className=\"font-mono text-gray-500 text-lg\">\n              /{vocabItem.pronunciation}/\n            </span>\n          )}\n          {vocabItem.meaning && (\n            <span className=\"text-gray-600 text-center font-medium px-4 line-clamp-2\">\n              {vocabItem.meaning}\n            </span>\n          )}\n        </div>\n        {assessmentResult ? (\n          <div\n            className=\"relative w-32 h-32 mb-6 flex items-center justify-center rounded-full border-8 transition-all duration-500 ease-out\"\n            style={{\n              borderColor:\n                assessmentResult.AccuracyScore >= 80\n                  ? \"#4caf50\"\n                  : assessmentResult.AccuracyScore >= 60\n                  ? \"#ffeb3b\"\n                  : \"#ff5252\",\n            }}\n          >\n            <span\n              className=\"text-4xl font-bold\"\n              style={{\n                color:\n                  assessmentResult.AccuracyScore >= 80\n                    ? \"#4caf50\"\n                    : assessmentResult.AccuracyScore >= 60\n                    ? \"#fbc02d\"\n                    : \"#ff5252\",\n              }}\n            >\n              {Math.round(assessmentResult.AccuracyScore)}\n            </span>\n          </div>\n        ) : (\n          <div className=\"w-32 h-32 mb-6 rounded-full border-4 border-gray-100 flex items-center justify-center bg-gray-50\">\n            <span className=\"text-4xl text-gray-300\">?</span>\n          </div>\n        )}\n        <div className=\"mb-6 flex gap-6 items-center\">\n          <button\n            onClick={(e) => handleSpeak(vocabItem.word, e)}\n            className=\"w-12 h-12 rounded-full bg-gray-100 hover:bg-gray-200 text-indigo-600 flex items-center justify-center transition-transform hover:scale-105 shadow-sm\"\n            title=\"Nghe gi·ªçng chu·∫©n\"\n          >\n            <SpeakerIcon className=\"w-6 h-6\" />\n          </button>\n          <button\n            onClick={isRecording ? stopRecording : startRecording}\n            className={`w-16 h-16 rounded-full flex items-center justify-center shadow-lg transition-all transform hover:scale-105 ${\n              isRecording\n                ? \"bg-red-500 animate-pulse ring-4 ring-red-200\"\n                : \"bg-indigo-600 hover:bg-indigo-700 ring-4 ring-indigo-100\"\n            }`}\n          >\n            {isRecording ? (\n              <div className=\"w-6 h-6 bg-white rounded-sm\" />\n            ) : (\n              <MicrophoneIcon className=\"w-8 h-8 text-white\" />\n            )}\n          </button>\n          <button\n            disabled={!userAudioUrl}\n            onClick={() => {\n              const audio = new Audio(userAudioUrl!);\n              audio.play();\n            }}\n            className={`w-12 h-12 rounded-full flex items-center justify-center transition-transform hover:scale-105 shadow-sm ${\n              userAudioUrl\n                ? \"bg-green-100 hover:bg-green-200 text-green-700 cursor-pointer\"\n                : \"bg-gray-100 text-gray-300 cursor-not-allowed\"\n            }`}\n            title=\"Nghe l·∫°i gi·ªçng b·∫°n\"\n          >\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              className=\"w-5 h-5\"\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n              stroke=\"currentColor\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z\"\n              />\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"\n              />\n            </svg>\n          </button>\n        </div>\n        {isProcessingAudio && (\n          <p className=\"text-indigo-500 font-medium animate-pulse\">\n            Analyzing...\n          </p>\n        )}\n        {assessmentError && (\n          <p className=\"text-red-500 text-sm text-center bg-red-50 p-2 rounded\">\n            {assessmentError}\n          </p>\n        )}\n        {assessmentResult && (\n          <div className=\"w-full bg-gray-50 rounded-xl p-4 mt-2 border border-gray-100\">\n            <div className=\"flex flex-wrap justify-center gap-x-4 gap-y-2\">\n              {assessmentResult.Words.map((word, idx) => (\n                <div key={idx} className=\"flex flex-col items-center\">\n                  <span\n                    className={`text-lg font-bold ${\n                      word.AccuracyScore >= 80\n                        ? \"text-green-700\"\n                        : word.AccuracyScore >= 60\n                        ? \"text-yellow-600\"\n                        : \"text-red-600\"\n                    }`}\n                  >\n                    {word.Word}\n                  </span>\n                  <div className=\"flex gap-0.5 mt-1\">\n                    {word.Phonemes?.map((p, pIdx) => (\n                      <span\n                        key={pIdx}\n                        className={`text-xs px-1 rounded min-w-[20px] text-center ${\n                          p.AccuracyScore >= 80\n                            ? \"bg-green-100 text-green-800\"\n                            : p.AccuracyScore >= 60\n                            ? \"bg-yellow-100 text-yellow-800\"\n                            : \"bg-red-100 text-red-800\"\n                        }`}\n                        title={`/${p.Phoneme}/: ${p.AccuracyScore}`}\n                      >\n                        {p.Phoneme}\n                      </span>\n                    ))}\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}","import { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { VocabItem } from \"@/hooks/vocabulary/useVocabData\";\r\n\r\ninterface Props {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  searchText: string;\r\n  onSearchChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\r\n  results: VocabItem[];\r\n  isSearching: boolean;\r\n  \r\n  // C√°c Actions\r\n  onSelect: (item: VocabItem) => void;\r\n  onCreate: () => void;\r\n  hasExactMatch: boolean;\r\n  searchInputRef: React.RefObject<HTMLInputElement>;\r\n  handleSpeak: (text: string, e?: React.MouseEvent) => void;\r\n  handleOpenAssessment: (item: VocabItem, e?: React.MouseEvent) => void;\r\n  triggerInteraction: (item: VocabItem) => void;\r\n}\r\n\r\nexport default function QuickSearchModal({\r\n  isOpen,\r\n  onClose,\r\n  searchText,\r\n  onSearchChange,\r\n  results,\r\n  isSearching,\r\n  onSelect,\r\n  onCreate,\r\n  hasExactMatch,\r\n  searchInputRef,\r\n  handleSpeak,\r\n  handleOpenAssessment,\r\n  triggerInteraction\r\n}: Props) {\r\n  const [translation, setTranslation] = useState<string>(\"\");\r\n  const [pronunciation, setPronunciation] = useState<string>(\"\");\r\n  const [partOfSpeech, setPartOfSpeech] = useState<string>(\"\");\r\n  const [isTranslating, setIsTranslating] = useState(false);\r\n\r\n  // Auto translate when search text changes and no exact match\r\n  useEffect(() => {\r\n    if (isOpen && searchInputRef.current) {\r\n      setTimeout(() => searchInputRef.current?.focus(), 100);\r\n    }\r\n  }, [isOpen, searchInputRef]);\r\n\r\n  useEffect(() => {\r\n    const fetchTranslation = async () => {\r\n      // Ch·ªâ reset khi c√≥ exact match, kh√¥ng ph·ª• thu·ªôc v√†o results.length\r\n      if (!searchText || hasExactMatch) {\r\n        setTranslation(\"\");\r\n        setPronunciation(\"\");\r\n        setPartOfSpeech(\"\");\r\n        return;\r\n      }\r\n\r\n      setIsTranslating(true);\r\n      try {\r\n        // Fetch c·∫£ dictionary v√† translation nh∆∞ code autofill hi·ªán t·∫°i\r\n        const dictPromise = axios\r\n          .get(`https://api.dictionaryapi.dev/api/v2/entries/en/${searchText}`)\r\n          .catch(() => null);\r\n\r\n        const translatePromise = axios\r\n          .get(\r\n            `https://translate.googleapis.com/translate_a/single?client=gtx&sl=en&tl=vi&dt=t&q=${encodeURIComponent(\r\n              searchText\r\n            )}`\r\n          )\r\n          .catch(() => null);\r\n\r\n        const [dictRes, transRes] = await Promise.all([\r\n          dictPromise,\r\n          translatePromise,\r\n        ]);\r\n\r\n        // X·ª≠ l√Ω dictionary data\r\n        if (dictRes && dictRes.data && dictRes.data[0]) {\r\n          const entry = dictRes.data[0];\r\n          \r\n          // Pronunciation\r\n          if (entry.phonetic) {\r\n            setPronunciation(entry.phonetic);\r\n          } else if (entry.phonetics && entry.phonetics.length > 0) {\r\n            const p = entry.phonetics.find((x: any) => x.text && x.audio);\r\n            setPronunciation(p ? p.text : entry.phonetics[0].text || \"\");\r\n          }\r\n          \r\n          // Part of Speech\r\n          if (entry.meanings && entry.meanings.length > 0) {\r\n            setPartOfSpeech(entry.meanings[0].partOfSpeech || \"\");\r\n          }\r\n        }\r\n\r\n        // X·ª≠ l√Ω translation\r\n        if (transRes && transRes.data && transRes.data[0]) {\r\n          const translatedText = transRes.data[0]\r\n            .map((item: any) => item[0])\r\n            .join(\"\");\r\n          setTranslation(translatedText);\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Translation error:\", error);\r\n        setTranslation(\"\");\r\n        setPronunciation(\"\");\r\n        setPartOfSpeech(\"\");\r\n      } finally {\r\n        setIsTranslating(false);\r\n      }\r\n    };\r\n\r\n    const debounceTimer = setTimeout(() => {\r\n      fetchTranslation();\r\n    }, 500);\r\n\r\n    return () => clearTimeout(debounceTimer);\r\n  }, [searchText, hasExactMatch]);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div \r\n      className=\"fixed inset-0 z-[100] flex items-start justify-center pt-20\"\r\n      onClick={onClose}\r\n      style={{ backgroundColor: 'transparent' }}\r\n    >\r\n      <div\r\n        className=\"bg-white w-full max-w-2xl rounded-2xl shadow-2xl overflow-hidden flex flex-col mx-4 border border-gray-100\"\r\n        onClick={(e) => e.stopPropagation()}\r\n      >\r\n        <div className=\"p-4 border-b border-gray-100 flex items-center gap-3\">\r\n          <span className=\"text-xl\">üîç</span>\r\n          <input\r\n            ref={searchInputRef}\r\n            type=\"text\"\r\n            value={searchText}\r\n            onChange={onSearchChange}\r\n            onKeyDown={(e) => {\r\n              if (e.key === \"Enter\" && results.length === 0 && !hasExactMatch) {\r\n                onCreate();\r\n              }\r\n            }}\r\n            placeholder=\"Type to search or create...\"\r\n            className=\"flex-1 text-xl font-light outline-none bg-transparent h-10\"\r\n          />\r\n          <div className=\"text-xs text-gray-400 border border-gray-200 px-2 py-1 rounded\">\r\n            ESC to close\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"bg-gray-50 max-h-[60vh] overflow-y-auto\">\r\n          {isSearching ? (\r\n            <div className=\"p-8 text-center text-gray-400\">Searching...</div>\r\n          ) : (\r\n            <>\r\n              {/* Google Translate Preview Section - Show when no exact match */}\r\n              {searchText && !hasExactMatch && (\r\n                <div className=\"bg-gradient-to-r from-blue-50 to-indigo-50 border-b border-blue-100\">\r\n                  <div className=\"p-4 space-y-3\">\r\n                    {/* Word with pronunciation buttons */}\r\n                    <div className=\"flex items-center gap-2 flex-wrap\">\r\n                      <span className=\"text-2xl font-bold text-gray-800\">\r\n                        {searchText}\r\n                      </span>\r\n                      \r\n                      {/* Pronunciation */}\r\n                      {pronunciation && (\r\n                        <span className=\"text-sm text-gray-600 font-mono bg-white px-2 py-1 rounded border border-gray-200\">\r\n                          {pronunciation}\r\n                        </span>\r\n                      )}\r\n                      \r\n                      {/* Part of Speech */}\r\n                      {partOfSpeech && (\r\n                        <span className=\"text-[10px] uppercase font-bold text-indigo-600 bg-indigo-100 border border-indigo-200 px-2 py-1 rounded\">\r\n                          {partOfSpeech}\r\n                        </span>\r\n                      )}\r\n                      \r\n                      <button\r\n                        onClick={(e) => {\r\n                          e.stopPropagation();\r\n                          handleSpeak(searchText, e);\r\n                        }}\r\n                        className=\"p-2 hover:bg-blue-100 rounded-full transition-colors\"\r\n                        title=\"Play pronunciation\"\r\n                      >\r\n                        üîä\r\n                      </button>\r\n                      <button\r\n                        onClick={(e) => {\r\n                          e.stopPropagation();\r\n                          handleOpenAssessment({ \r\n                            id: 'temp', \r\n                            word: searchText,\r\n                            // userId: '',\r\n                            createdAt: new Date().toISOString(),\r\n                            updatedAt: new Date().toISOString(),\r\n                            occurrence: 0,\r\n                            isStarred: false,\r\n                            pronunciationScores: [],\r\n                          }, e);\r\n                        }}\r\n                        className=\"p-2 hover:bg-green-100 rounded-full transition-colors\"\r\n                        title=\"Test pronunciation\"\r\n                      >\r\n                        üé§\r\n                      </button>\r\n                    </div>\r\n\r\n                    {/* Translation */}\r\n                    {isTranslating ? (\r\n                      <div className=\"text-sm text-gray-500 italic animate-pulse\">\r\n                        Loading...\r\n                      </div>\r\n                    ) : translation ? (\r\n                      <div className=\"bg-white rounded-lg p-3 border border-blue-200\">\r\n                        <div className=\"text-xs text-gray-500 mb-1\">\r\n                          üåê Google Translate\r\n                        </div>\r\n                        <div className=\"text-base text-gray-800 font-medium\">\r\n                          {translation}\r\n                        </div>\r\n                      </div>\r\n                    ) : null}\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* Create New Button */}\r\n              {searchText && !hasExactMatch && (\r\n                <div\r\n                  className=\"p-4 bg-indigo-50 border-b border-indigo-100 flex justify-between items-center group cursor-pointer hover:bg-indigo-100 transition-colors\"\r\n                  onClick={onCreate}\r\n                >\r\n                  <div className=\"flex items-center gap-3\">\r\n                    <div className=\"w-10 h-10 rounded-full bg-indigo-200 text-indigo-700 flex items-center justify-center font-bold text-xl\">\r\n                      +\r\n                    </div>\r\n                    <div>\r\n                      <div className=\"font-bold text-indigo-800\">\r\n                        Create \"{searchText}\"\r\n                      </div>\r\n                      <div className=\"text-xs text-indigo-500\">\r\n                        Auto-fill meaning & pronunciation\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <span className=\"text-sm font-semibold text-indigo-600 bg-white px-3 py-1 rounded-full shadow-sm\">\r\n                    Enter ‚Üµ\r\n                  </span>\r\n                </div>\r\n              )}\r\n\r\n              {/* Results List */}\r\n              {results.length > 0 ? (\r\n                <ul className=\"divide-y divide-gray-100\">\r\n                  {results.map((item) => (\r\n                    <li\r\n                      key={item.id}\r\n                      onClick={() => {\r\n                        triggerInteraction(item);\r\n                        onSelect(item);\r\n                      }}\r\n                      className=\"p-3 hover:bg-indigo-50 cursor-pointer transition-colors group\"\r\n                    >\r\n                      <div className=\"flex justify-between items-start gap-3\">\r\n                        <div className=\"flex-1\">\r\n                          <div className=\"flex items-center gap-2 mb-1\">\r\n                            <span className=\"font-bold text-lg text-indigo-700\">\r\n                              {item.word}\r\n                            </span>\r\n                            \r\n                            {/* Actions nh·ªè trong list */}\r\n                            <button\r\n                              onClick={(e) => {\r\n                                e.stopPropagation();\r\n                                handleOpenAssessment(item, e);\r\n                              }}\r\n                              className=\"text-gray-400 hover:text-green-600 p-1 rounded-full hover:bg-green-100\"\r\n                            >\r\n                              üé§\r\n                            </button>\r\n                            <button\r\n                              onClick={(e) => {\r\n                                e.stopPropagation();\r\n                                handleSpeak(item.word, e);\r\n                              }}\r\n                              className=\"text-gray-400 hover:text-indigo-600 p-1 rounded-full hover:bg-indigo-100\"\r\n                            >\r\n                              üîä\r\n                            </button>\r\n                            \r\n                            {item.partOfSpeech && (\r\n                              <span className=\"text-[10px] uppercase font-bold text-indigo-500 bg-indigo-50 border border-indigo-100 px-1.5 py-0.5 rounded\">\r\n                                {item.partOfSpeech}\r\n                              </span>\r\n                            )}\r\n                          </div>\r\n                          <div className=\"text-sm text-gray-800 line-clamp-2\">\r\n                            {item.meaning || <span className=\"italic text-gray-400\">No meaning</span>}\r\n                          </div>\r\n                        </div>\r\n                        \r\n                        {/* Meta info b√™n ph·∫£i */}\r\n                        <div className=\"text-right shrink-0 flex flex-col items-end gap-1\">\r\n                          {item.topic && (\r\n                            <span className=\"text-[10px] text-gray-500 bg-gray-100 px-2 py-0.5 rounded-full\">\r\n                              {item.topic}\r\n                            </span>\r\n                          )}\r\n                          {item.isStarred && <span className=\"text-yellow-400 text-xs\">‚òÖ</span>}\r\n                        </div>\r\n                      </div>\r\n                    </li>\r\n                  ))}\r\n                </ul>\r\n              ) : (\r\n                !hasExactMatch &&\r\n                searchText && !translation && !isTranslating && (\r\n                  <div className=\"p-4 text-center text-gray-400 text-sm\">\r\n                    No existing words match.\r\n                  </div>\r\n                )\r\n              )}\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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"}