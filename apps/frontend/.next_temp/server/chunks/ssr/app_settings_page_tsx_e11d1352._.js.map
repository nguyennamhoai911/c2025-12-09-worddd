{"version":3,"sources":["../../../../app/settings/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\nimport api from '@/lib/api';\r\n\r\nexport default function SettingsPage() {\r\n    const { user, isLoading: authLoading } = useAuth();\r\n    const [loading, setLoading] = useState(false);\r\n    const [success, setSuccess] = useState('');\r\n    const [error, setError] = useState('');\r\n\r\n    const [formData, setFormData] = useState({\r\n        name: '',\r\n        googleApiKey: '',\r\n        googleCx: '',\r\n        azureSpeechKey: '',\r\n        azureSpeechRegion: '',\r\n        geminiApiKey: '',\r\n    });\r\n\r\n    useEffect(() => {\r\n        if (user) {\r\n            setFormData({\r\n                name: user.name || '',\r\n                googleApiKey: user.googleApiKey || '',\r\n                googleCx: user.googleCx || '',\r\n                azureSpeechKey: user.azureSpeechKey || '',\r\n                azureSpeechRegion: user.azureSpeechRegion || '',\r\n                geminiApiKey: user.geminiApiKey || '',\r\n            });\r\n        }\r\n    }, [user]);\r\n\r\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        setFormData({ ...formData, [e.target.name]: e.target.value });\r\n    };\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n        setSuccess('');\r\n        setError('');\r\n\r\n        try {\r\n            if (!user) return;\r\n            await api.patch(`/users/${user.id}`, formData);\r\n            setSuccess('Cập nhật thành công!');\r\n            // TODO: Could trigger a re-fetch of user here to update context, but ignoring for now\r\n        } catch (err) {\r\n            setError('Có lỗi xảy ra khi cập nhật.');\r\n            console.error(err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    if (authLoading) return <div className=\"p-8 text-center text-white\">Loading...</div>;\r\n    if (!user) return <div className=\"p-8 text-center text-white\">Vui lòng đăng nhập để xem cài đặt.</div>;\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gradient-to-br from-indigo-900 via-purple-900 to-black text-white p-6 justify-center flex items-center\">\r\n            <div className=\"w-full max-w-2xl bg-white/10 backdrop-blur-md rounded-2xl p-8 shadow-2xl border border-white/20\">\r\n                <h1 className=\"text-3xl font-bold mb-8 bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent\">\r\n                    Cài đặt tài khoản\r\n                </h1>\r\n\r\n                {success && <div className=\"mb-4 p-4 bg-green-500/20 border border-green-500 rounded text-green-200\">{success}</div>}\r\n                {error && <div className=\"mb-4 p-4 bg-red-500/20 border border-red-500 rounded text-red-200\">{error}</div>}\r\n\r\n                <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n\r\n                    <section>\r\n                        <h2 className=\"text-xl font-semibold mb-4 text-purple-300 border-b border-white/10 pb-2\">Thông tin cá nhân</h2>\r\n                        <div className=\"grid gap-4\">\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-300 mb-1\">Email</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={user?.email || ''}\r\n                                    disabled\r\n                                    className=\"w-full px-4 py-2 bg-black/20 border border-white/10 rounded-lg text-gray-400 cursor-not-allowed\"\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-300 mb-1\">Tên hiển thị</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    name=\"name\"\r\n                                    value={formData.name}\r\n                                    onChange={handleChange}\r\n                                    className=\"w-full px-4 py-2 bg-black/20 border border-white/10 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-500 transition\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                    </section>\r\n\r\n                    <section>\r\n                        <h2 className=\"text-xl font-semibold mb-4 text-purple-300 border-b border-white/10 pb-2\">Cấu hình Extension</h2>\r\n                        <p className=\"text-sm text-gray-400 mb-4\">Các thông tin này sẽ được Extension tự động đồng bộ.</p>\r\n\r\n                        <div className=\"space-y-4\">\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-300 mb-1\">Google API Key</label>\r\n                                <input\r\n                                    type=\"password\"\r\n                                    name=\"googleApiKey\"\r\n                                    value={formData.googleApiKey}\r\n                                    onChange={handleChange}\r\n                                    placeholder=\"AIza...\"\r\n                                    className=\"w-full px-4 py-2 bg-black/20 border border-white/10 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-500 transition\"\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-300 mb-1\">Google Cx (Search Engine ID)</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    name=\"googleCx\"\r\n                                    value={formData.googleCx}\r\n                                    onChange={handleChange}\r\n                                    placeholder=\"012345...\"\r\n                                    className=\"w-full px-4 py-2 bg-black/20 border border-white/10 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-500 transition\"\r\n                                />\r\n                            </div>\r\n\r\n                            <div className=\"grid grid-cols-2 gap-4\">\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-300 mb-1\">Azure Speech Key</label>\r\n                                    <input\r\n                                        type=\"password\"\r\n                                        name=\"azureSpeechKey\"\r\n                                        value={formData.azureSpeechKey}\r\n                                        onChange={handleChange}\r\n                                        className=\"w-full px-4 py-2 bg-black/20 border border-white/10 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-500 transition\"\r\n                                    />\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-300 mb-1\">Azure Region</label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        name=\"azureSpeechRegion\"\r\n                                        value={formData.azureSpeechRegion}\r\n                                        onChange={handleChange}\r\n                                        placeholder=\"eastus\"\r\n                                        className=\"w-full px-4 py-2 bg-black/20 border border-white/10 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-500 transition\"\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div style={{ marginTop: '1rem' }}>\r\n                                <label className=\"block text-sm font-medium text-gray-300 mb-1\">Gemini API Key (AI Analysis)</label>\r\n                                <input\r\n                                    type=\"password\"\r\n                                    name=\"geminiApiKey\"\r\n                                    value={formData.geminiApiKey}\r\n                                    onChange={handleChange}\r\n                                    placeholder=\"AIza...\"\r\n                                    className=\"w-full px-4 py-2 bg-black/20 border border-white/10 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-500 transition\"\r\n                                />\r\n                                <p className=\"text-xs text-gray-500 mt-1\">Dùng để phân tích ngữ cảnh và dịch nâng cao.</p>\r\n                            </div>\r\n                        </div>\r\n                    </section>\r\n\r\n                    <button\r\n                        type=\"submit\"\r\n                        disabled={loading}\r\n                        className=\"w-full py-3 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 rounded-lg text-white font-semibold shadow-lg transition transform active:scale-95 disabled:opacity-50\"\r\n                    >\r\n                        {loading ? 'Đang lưu...' : 'Lưu cài đặt'}\r\n                    </button>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}